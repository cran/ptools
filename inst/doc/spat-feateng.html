<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Andrew Wheeler" />

<meta name="date" content="2022-12-27" />

<title>Spatial Feature Engineering with ptools</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Spatial Feature Engineering with
ptools</h1>
<h4 class="author">Andrew Wheeler</h4>
<h4 class="date">2022-12-27</h4>



<p>This vignette goes over the different functions the
<code>ptools</code> package has to generate spatial features common to
criminological stype spatial covariate analysis. These include creating
spatial units of analysis (grid cells, hexagons). And calculating
different spatial feature engineering, such as the distance to nearest
and kernel density estimates for covariate values.</p>
<div id="creating-spatial-units-of-analysis" class="section level2">
<h2>Creating Spatial Units of Analysis</h2>
<p>I will start off with an example loading in the data that is included
in the package, and I load the <code>sp</code> library to use its simple
plotting functions.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ptools)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sp)     <span class="co">#for plotting functions</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster) <span class="co">#for buffer later on</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_shoot,<span class="at">pch=</span><span class="st">&#39;.&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>We can create a set of vector grid cells over the study area. The
projection is in feet, so here I make half-square mile grid cells over
the NYC borough outline.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>hm_grid <span class="ot">&lt;-</span> <span class="fu">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hm_grid,<span class="at">col=</span><span class="st">&#39;grey&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAACVBMVEUAAAC+vr7////xRzILAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKSUlEQVR4nO3dwXaDRhKGUSfv/9Azo1lYFkICfpquku5dZKF26EZ8VOKT5OTnXwj8zD4AvQmIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICGisf27+vf/j6o9dfLRzCGgsAREREBEBEREQvCKgUe6Gzt8JtPzo/YSqS0CjCIiIgIgIiIiAiAgI3hPQKCYQEQERERARARERELwnoFEOT6D19YoENIqAiAiIiICICIiIgOA9AZ3u+ITZtV6EgE4nICICIiIgIgKCzQR0OhOIiICICIjIZQGVeHYlDvFZBEQXBZ5egSN8jlMnzPsJ9N+nN//xzT/BB7k8oAIEdCIBEZkS0OQnKKATzQho9gOcvf9HuT6g+X8XPf0A9CagE106gZ799WwCAZ1IQEQERERARAQEOwnoFKMnjAn04QREREBEBEREQEQEBIcI6BQmEBEBEREQEQERERAcIqBTXDOB7vby34V9FgERERARAREREBwioMypE2Z9/cmWRQgoI6DZB2hOQLMP0JyAZh+gOQHNPkBzApp9AHoTUOaiCVRq6PwhoIyAZh+gOQHNPkBzApp9gOYENPsA9CagowZMmG3rtQjoKAHdCOgoAd0I6CgB3QjoKAHdCOgoAd0IiIiAjjKBbgR0lIBuBHSUgG4EdJSAbgR0lIBuBEREQLuNmzBPrr/c+fL7fU1AuwnonoB2E9A9Ae0moHsC2k1A9wREREA7pBPmz0drV953/ekEtIOAlgS0g4CWBLSDgJYEtIOAlgS0g4CWBEREQDucOoHOWZ9OQDsIaElAOwhoSUA7CGhJQDsIaElARAS0ybQJc2D9WgLapFIgAmqoUiACaqhSIAJqqFIgAmqoUiAC4oMIaJNKE2bX+nAC2qRsIALqoWwgAuqhbCAC6qFsIAKiNwG9NnuCnLQ+joBeKxKAgLoqEoCAuioSgIC6KhKAgPhQAnqtyAQ5Z30EAb1WKgAB9VMqAAH1UyoAAfVTKgAB9VMqAAHxcQS0puAEMYE6KRiAgDopGEC6PuJhC2hNwQDS9RFPW0BrCgYgIOYS0IUKThATqJOCAQiok4IBCKiTggHEAQ143AJaUzAAAXVSMAABMZmArlNwgphAnRQMIA7Ib2EXKhiAgDopGEC67p/GX6lgAALi4whoTcEJkq6PIKA1BQMQUCcFAxBQJwUDEFAnBQMQEB9HQGsKTpDj6+MIaE2pAATUT6kABNRPqQAE1E+pAATUT6kABMSHEtCaUhPk8PpwAlpTIwABtVUjAAG1VSMAAbVVIwAB8dkEtFBqgphA/ZQKQED9lApAQP2UCkBA/ZQKQED9lApAQHw2Ad08eV1rTBATqAcBHSWgGwEdJaAbAR0loBsBHSUgIgK6uX9dS00QE6gHAR0loBsBHSWgGwEdJaAbAR0lICLfHtCT17XUBDGBihNQSEACighIQBEBCSgiIAFFvj0gQgJaKDVBTKB+SgUgoH5KBSCgfkoFIKB+SgUgID6bgBZKTRATqJ9SAQion1IBCKifUgEIqJ9SAQion1IBCIjPJqA1NSaICdRWjQAE1FaNAATUVo0ABNRWjQAExGcT0EKpCWIC9VMqAAH1UyoAAfVTKgAB9VMqAAHx2b4qoG0vZakJYgJVIqDzCej5T1UJQECVCOh8Anr+U1UCEFAlW77Tn1oBCIjP1iSgd2/YgTf09S7zJ8jdkYI/fzgBPd9FQBsJ6PkuAtpIQM93EdBGAnq+i4A2ahIQVVUPaPQbfr/NjAn0bv/j57uIgH63EdABAvrdRkAHCOh3GwEdIKDfbQR0gIB+txHQAdUDori6AY2eAGubXTuBNq7/38/vWV+Nq0sJ6HGzwgHdnVVAb41+QGubCWgXAT1uJqBdBPS4mYB2qRsQLdQNaPQbvrZZyQn0bn0eAT1uVjKQd+vzCOhxs5KBvFufR0CPm5UM5N36PAJ63KxkIO/W56kbEC3UDeiaN3i52bUTZMD+1xLQ42YC2kVAj5sJaBcBPW4moF0E9LiZgHYR0ONmAtqlbkC0UDegaybAP/dv7bjrr3603Pms619EQHff9rjrr3603FlAJ7nmAf75tsddf/Wj5c4COsk1D/DPtz3u+qsfLXcW0EmueYB/vu1x11/9aLmzgPgmdQO6ZgI8eV1HXH/b+qn7X0RAi297xPW3rZ+6/0UEtPi2R1x/2/qp+19EQItve8T1t62fuv9FBLT4tkdcf9v6qftfRECLb3vE9bet/89p/7OXi9QNiBbqBnTNBNh0iqsm4KnXv4iANpxCQOsEtOEUAlonoA2nENA6AW04hYDW1Q2IFuoGdOobvvrRplNcNYHWtgzOP5yANpxCQOsEtOEUAlonoA2nENA6AW04hYDW1Q2IFuoGdOobvvrSP5kAJ+1/8/Pz83ixZhPmHQENDejJxQR0EQEJKCIgAUUEJKCIgATE5ysY0EkTZnV9zzH2Xf/oJQ+drwgBvTyGgN4R0MtjCOgdAb08hoDeEdDLYwjonYIB0UnBgMZNoOfO/gqOnK8vAZ3+HQhosssDKnD+vgRU4vx9CajE+fsSUInz91UwIDopEtA5E2b2G77tfJ9FQGPuQkDXElBXAhpzFwK6loC6KhIQXc0O6KQJs/rR9Tczcf8ZBHT2zQjoUgJqTkBn34yALiWg5mYHRHPzAjpnwqyvz76lLyGgUbf0JQQ06pa+hIBG3dKXENCoW/oSAhp1S1/Cr/FEZgc0YAJxJQERERARAREREJHZAdHc7IDSCXR/mZn38bUERERARAREREBEBERkdkA01/df56AEAREREBEBEREQEb+FEWk1gahHQEQERERARARExG9hROpOIFoQEBEBEREQEQERERARv8YTKTiB6ERARAREREBEBETEb2FEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQEROQ/vbh2PWITYa0AAAAASUVORK5CYII=" style="display: block; margin: auto;" /></p>
<p>I have provided two arguments to the functions to limit the vector
areas returned. One is sometimes we only want areas that have at least
one observation for certain analyses (so at least one shooting over the
15+ year period in the current sample).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>lim_grid <span class="ot">&lt;-</span> <span class="fu">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>,<span class="at">point_over=</span>nyc_shoot)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lim_grid,<span class="at">col=</span><span class="st">&#39;grey&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>So you can see it is not as filled in for Staten Island. Note that
there is an additional argument, <code>point_n</code>, if you wanted to
limit grid cells even more, so at least 2, 3, etc. points are in a grid
cell.</p>
<p>A second way we can limit the grid cells are to not have dongle grid
cells – cells that only cover a small portion of the city. Here I only
include grid cells that have over 30% of their area inside of the border
of the city. Note though that this will cause <em>some</em> areas inside
the jurisdiction to not be covered. But you can pretty clearly see the
reduced number of areas compared to the original grid cells.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>lim_grid2 <span class="ot">&lt;-</span> <span class="fu">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>,<span class="at">clip_level =</span> <span class="fl">0.3</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lim_grid2,<span class="at">col=</span><span class="st">&#39;grey&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># See how many fewer than original</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(hm_grid))   <span class="co">#original</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1493</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(lim_grid2)) <span class="co">#no dongles less than 30%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1290</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(lim_grid))  <span class="co">#only overlap 1 shooting</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 867</span></span></code></pre></div>
<p>I also have a similar function, <code>prep_hexgrid</code>, that
prepares spatial units of analysis in hexagons instead of square grid
cells. One difference is that instead of specifying the size of the cell
per length of a side, it specifies it per unit area. So it make it a
square mile, use <code>5280^2</code> as the area argument. (Here I make
it a half square mile.)</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>hex_grid <span class="ot">&lt;-</span> <span class="fu">prep_hexgrid</span>(nyc_bor,(<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span>,<span class="at">clip_level =</span> <span class="fl">0.3</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Loading required namespace: rgeos</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in proj4string(obj): CRS object has comment, which is lost in output; in tests, see</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_grid,<span class="at">col=</span><span class="st">&#39;lightblue&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor,<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>The <code>prep_hexgrid</code> function also has the same
<code>point_over</code> and <code>point_n</code> arguments as does the
<code>prep_grid</code> function. Here I limit to areas with more than 4
shootings.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>hex_lim <span class="ot">&lt;-</span> <span class="fu">prep_hexgrid</span>(nyc_bor,(<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span>,<span class="at">point_over=</span>nyc_shoot,<span class="at">point_n=</span><span class="dv">4</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in proj4string(obj): CRS object has comment, which is lost in output; in tests, see</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_lim,<span class="at">col=</span><span class="st">&#39;lightblue&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor,<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Note that the way I wrote these functions, the
<code>clip_level</code> for hexagons can be somewhat slow. Doing
<code>point_over</code> though should be reasonably fast.
<code>prep_grid</code> converts from raster to vector, so if you have
<em>very tiny</em> cells, you may consider just keeping the original
raster format for analysis. The conversion to vector will always creep
up your memory usage and computation time.</p>
<p>Finally, I have a function that if you have a set of origin points,
you can create voronoi polygons within an outline area. Sometimes if
working with line or address based features it is simpler to convert to
polygons and do subsequent geospatial operations. But note this can take
a bit of time as well for any really dense point set (same as really
tiny grid cells or hexagons).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a smaller sample of the liquor stores in NYC</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>liq_samp <span class="ot">&lt;-</span> nyc_liq[<span class="fu">sample</span>(<span class="fu">rownames</span>(nyc_liq<span class="sc">@</span>data),<span class="dv">20</span>),]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Buffer, it is hard to view all the little islands</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>nyc_buff <span class="ot">&lt;-</span> <span class="fu">buffer</span>(nyc_bor,<span class="dv">5000</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create Voronoi/Thiessen areas</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>liq_vor <span class="ot">&lt;-</span> <span class="fu">vor_sp</span>(nyc_buff,liq_samp)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in sp::proj4string(outline): CRS object has comment, which is lost in output; in tests, see</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot to show off</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(liq_vor,<span class="at">col=</span><span class="st">&#39;tan&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(liq_samp,<span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_buff,<span class="at">border=</span><span class="st">&#39;black&#39;</span>,<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="spatial-feature-engineering" class="section level2">
<h2>Spatial Feature Engineering</h2>
<p>The spatial feature engineering functions are not only for creating
vector spatial units, but assigning typical values we may be interested
in. So lets reuse our <code>hex_grid</code> over the city, and calculate
the number of shootings in each hexgrid:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>shoot_cnt <span class="ot">&lt;-</span> <span class="fu">count_xy</span>(hex_grid,nyc_shoot)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(hex_grid,<span class="at">zcol=</span><span class="st">&#39;shoot_cnt&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAAn1BMVEUAAAAAADMAADoAAGYAAGsAAHQAAKwAAOMAAOwAOjoAOpAAZrYdAP86AAA6ADo6AGY6OgA6OpA6ZmY6kNtQAP9mAABmADpmAGZmOpBmtv97AP+CAP+QOgCQOjqQOmaQ2/+uGea2ZgC225C2///ZNMvbkDrbtrbb///hOcb/Var/dYr/lmn/sk3/tmb/0i3/25D/7hH//2D//7b//9v///+Rrqo6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO2dDZvcNnalSQ+3KnF6JjNxj2fdu7OWYimKndVqR67//9vSLOJcfFxc8LJQX+o657EMFACCIPg2QBIXwHCgqA4Nty4A9W2LAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlyyABuqNa+VGdwO0CcNH1TCM4zhX9jBM0+Sv9TuQAPSPqgjQNTTjMx4RmhZ9QwgRoDsQABoB0PTtVBsBugMRIALUJQJEgLpEgAhQl2yApPp0PaoktxEBurle3+GH8BIWCJo9iBFPedAuxNz4lY0A3VoD2AmeCZ4DsEKS5Jhh96o55uZv/QToxpJvQOOqJ/Znu6A7eGYiQDcWAcrz8YZTQQQoz8cbTgURoDwfbzgVRIDyfLzhVFCgYxi0Z8w9YhsxDIGgexh8JUC31sxHMOcoPOHH8bvQKIYeR3rm/y3/jqE3RIgA3V6qrUkbHTQx0tag95JWaLhpK0SA7kCNxx55yBGPPP/cx3MQAboDESAC1CUCRIC6RIAIUJfODNBV65wA3VzzAHx45yo8x6H55Q1LDD0COPDMbkgSCNKmH5ctPVwCdCMJIdqDN/hIkzCTQjQjFI45iC3I1YoPlwDdRvKBR3dW4kF/VvZeOzWmEfvAq5UfLgG6jQhQno83nAoiQHk+3nAqiADl+XjDqaA3A9D/r4oAXVqXBujSX4cI0E2Fl/Xki0/iWZh4fVkvXuOf4HkpX+N3cW6H5J97zn4FcAnQ9RXv9lQwM0WaFkKSD4lPs2bPy6uyD4m7NG36UeiCX4cI0O1UmZBaeirGq09BR35mhCYrbWWE5AIXAZcAXV0EqJKPN5wiQNV8vOEUAarm4w2nCFA1H284dUgm8OCOl57aBB7wEwBKjOp3edraTKELXAVcAnRdFRN4AgHJNJ2AUTGBZyZneYufPwO9hDk+SJ/9GLO88ePs1wGXAF1VlQk8aD+smTwDWp8krW504BlV63aZVogA3UbaeFU/7ZQPN/Hxxx7KkGP089VlnoO2AfTlX385HH7/38MfolPkY+VP5XpQgN7PyLz/l/k/OEU+Vv5UrscE6PM/v7ZAX3/8eW6JglPmY+VP5XpIgH7/P//+SsyXBaLglPlY+VO5HgagdMuVjz98IUBnUX0CT3ixwuj6HgPwTyFmv7yGJbMy9qU5RzINKOSfLPyKgLPekw0t0Nf/+YkAnUXmBJ5kms7+VUcgwMx+CXmK88KWgMScY4JHUBE4ERKwOuO1wF0H6P1PBwJ0DjWMEKVL2i+KvdYeISqJzqXoHWue810M3FWAvv712Jv9xIfoXj0oQLOOxPA1vlOPDtBrU/SH6BT5WPlTUQ8M0Ho+3vBHFgFq5OMNf2BVRj5x5+PgaIAjjp8Cl0oSlUuApLXw6/muBi4Buo5gYTEMz8/PMMIIJheBj8VO4/gWDwuOJXafJEH6SZl/ROMNc+HXc14PXAJ0DcW24HlRYqshLQosxaa8aRlajY5q1EbV6EhzdN4rgkuArqH4EPIMgopHmj1MVV/Uw01Moh97rOegxnr3Z7oiuAToGiJAa/l4wx9UBGgtH2/4g+oNA/T/qiJA5xUBWsvHG/6QSgbI90N4CZuircbyhvXbEFZNeIqj64u7QxK9gIdtziE7r8Kc49zXBJcAXVzxVi4cPA9CRng93w+/zZrXbVk+Hyao4POhyUzNnON42ojtBWYWEqCrKXYmqieSvum3IJk+KElK28NKr1V2X4M+8wWuCi4BurQIkCcfb/gDigB58vGGP6AIkCcfb/gDigB58vGGP56SYU01Jgp+AFAyCx5JxIoDlDSMQnCe8tTqHf4MI6sE6DpKFsxYbHmCecZi1xF+vHt3RAhrcCQWH1O+9EbNgkOZc+SnhxFJEdj9YYgAXUWxucjNwfaw6xhmfGYlNmRi8aHaGoc5hyqBijmPdRkBuorkTpcGqXvB5F1QtGKV0Q77acd+ILKLIAFneTIiQFcRAfLm4w1/MBEgbz7e8AcTAfLm4w1/MBEgbz7e8EdTtMhYXsJkAP55WN60XpbXsONOKstL2DtYfDzrcfdVcw6LoHR1jrOstECArqTEImMXTYBASJiH8Q47qTwFmp6RpLkfixFTK0LGzDnWeiFAV5Pe8V36KDFClO4L/VnZjbV6LRWji1D2Wv23hwBdTfcI0BmuCi4BurQIkCcfb/gDigB58vGGP6AIkCcfb/jjKbHIgCsDqeAn7qQiI6tIAig85hxwdRnOMn6aZwmXAF1U2DNlhwU2gq3G/O/DhyNCy6IcT9hJ5fhNaBmULxbwmCZZ0qNl21EvxnnxIUBXkl6DA13TKz6zkkU5JK00R+pgvQmUao7MklxqdQ4CdEnp+afycPMhECTPQfKoJA9E6mBJYj8QXe3K4BKgS4oAefPxhj+YHgCg/1sVATqPCJA3H2/4g4kAefPxhj+WKi9St3oLO/ulwXUA9HkYvvv5cPjyx2H4/hN3LHQrrsX6guVX1Xeg41fDl5fgweeiJ8zvyT4i6e9AmLOz+h3oAhcHdx2gL3/6+fD5lZnPywYH3OrAp9goyPdmaVHQCmHgInqkrclboWqjg6/LKuYqlwfX14XNW6y8/wE+brbiUHwsKZ9y4nOQmLOKB0875XNQ5bFHxrdUzFUuD64BULrh3Ks+fv/p978f93jidk9OPThAWeIvf3x9Bvr645/nRyEC5BQBSvX6DDQ/Cn392y8EyCkClCogwx0L/SJAqSJAfIh26Tj34ng3hyfMvdjH7XXDp6ABL2HRs7yEyZ6pslWqWrtVNkSVWRk7NYHnkhcIdx2g+RX+y18+BYev8R5h9tcUOHjBSr2yve7yKXpGZgA7wZPs2hze5EGTnskzRprCy/75t9c1rhCuowX6OBw/HQaHOxauKw4+oCfSoxEYytDdmHRJOFj6s7Kzir2WZHt+41XjEuH6urDVfLzhjyECRIC6RIAIUJcIEAHqEgEiQD1KVkLEmKiMkuJGR3OOgE30AIp4sHgQM+WexNDj/BN4jGuES4DOLVhl7OOqq7/++issMoJ5Bsw5wqB84ln22g2mGWHf5iJUJvvg35EYGHqEEfoLI0SALqTEaAPtxq+LkuYC5hzPyqPaGmnLpNGR/BEgjY7kD88lrxMuATqvKpapv4IgMCBDGdqjnnbk4UlC1NhGOaZxFftWAnQhESAC1CUCRIC6RIAIUJcIEAHqUDIu/hxXXQ0vYVh19QPMOV6wHmuyFe9yjIy7jxjXH6M5x5L/ISbBl58QkMRc7jYQoEsoWubgrTyYaPwaV10N3w+fwx7NzzD0kK14E8ufBYx9tPwZkP9yOr3P7pTHXA4hAnQBxb6jtDlUE1JlRmprU3h0Tdr2UM5YDlyomEuNaRCgC+gOADqUMQToG9JDAvRfVRGgU0SACFCXCBAB6lEy4Alcoq0GAsBPXJQDo6XaViMQkHgQI6dEjC7MaEad52LhEqAzCWtlTNhR9xnLboSlN7CR7hGfmZg5dprCEqxjNMJIlt5Y/o2ym251A91rLcyaZw+XAJ1HupWQNgbdWIxRJhpFc5E0OmVDUtnC2yzSJe05CNCZJXdanlNkQmppq1p57CkfWGLAhR9lThYBOrMIEAHqEgEiQF0iQASoS1cHqPLmXsZcxZyDAJ1D2dB5+JozhPF2WYMj2UQ3vIRh3L3YB/c4uh4CjEF1basxh2QxxxNd7orhEqB+KeMdIeMlrsEBc44Qs480LVnoXZVHFRPPWGKlgRM4L3TNcAlQt1rmg/jwLEMZEgNXchGP6s/0GR1d3lSe4MwXDZcAdes8AMXs1p+bCdCbEgEiQF0iQASoSwSIAPWoOZFd1uCAOYfEwK28oI94kzLPWCSpDb7KiSQJPOe5argEqE/FohnLFBzYdWRrcMCcY4KtxjRpkwttwVE9Y2H+IemzGDlRYtthZ7v1uuESoC7FP3RZNANNgF6DQxod1VxIdnKw2QrFXOApGp2hdaK1xs1/4XAJUJf0hFF5CJHHnvL5pzFOoa1YzTN6ZqbqE5nZbr5wuASoSwSIAHWJADkACjsWhq0KuWNhKgK0DhB2LAx7HHCrg1QEyNeFxV1WuNlKosqiGWKIMWEAXlZawOoZSZLlboZx9wNW2jgusJHFqDNmC3iMyE7FSC5j6jnHuh1rAOkdC8M+T9zuKSqistywXbxPAavnuNbL8YCUmeIml8wkNMUTDikqyQIeo9qGZaowU9DUd+1wPS3QccdCAlRKGyGWnUns2Mpjxi39mXnwpItgdl+NE5108XB9Xdi8YyEBKkSAZve3qirPQASoFAE6bAGID9GlCNDBBVCxVSFf4yECdPC1QPlWhdyxEHpzAG25aRu7sNV8esrybSq+ICdbmY4IWW7ia5KwpCqOKZJke+dar/Hpygoqf0mCgCym9hpffn1KL8h/2whQn+LdngACblxJRtL8qCRT9bZnH4XC3Y7nLfNPPiQqFPWHRClClu0BzZsbIQLUpUpnYvchcpBKYnY8rY7N7vvsg8vi2v2l98mIAHWJABGgLhEgAtQlAkSAukSACFCPEnN13JEBbvQgiRykkkzKg2PEMxa5HHT+Y+4ZWrmogwcUrjjR2gKLBOh0FTNz9I8sNNyTuClukqRMH48pp+kUINYmB6mDE4+VZSBGTSbS841UJcAlQFtVaXSM5ihtUTDrp9Fi5cfUmguUoJFL0RzV2qUtSexagEuAtko/9oyo7zImPtPINnTqYPOY1gOLnYukLT2tJyM7xq4FuARoqwjQsQhwCdBWEaBjEeASoK0iQMciwCVAW0WAjkWAS4C2KZv4APdY4bXR9WSAPLyEVQ5WnjHNLrf4QCnsXOTgzFMbmndM3LAJIkCnSd+wjJn8bhc07cyDFVYNi49QDjOXzDhIPBoVSaKYKWgyKgIuAdqiRsdjdUCVJGaMK0lRFNfBqrMyYyr9Wb0m4BKgLSJAUhNwCdAWESCpCbgEaIsIkNQEXAK0RQRIagIuAdqgdYuM2g65OokR40uCojjyFw9Y0IXT46eSBB65+Kwq4BIgt6pGGLUfI2wj5h9PT6vpHVmGgfwlRCxKNmQZ2CgKp0OrP+Tik8qAS4Cc2tSiyJ/z01HbmgudRFaAPaXFWmtrHBYftQ3H4RIgp0575ngKBG05WCUxx0E25WI+7ThGO9QTWATo16oIkBIBIkBdIkAEqEsEiAB1iQARoD5hADvcx6otRYiRlQqmYXkJa47eW7lMckKxBRnSg5tFGMsTWePuTYsPNXofv0OhVgiQX4Ms5mvf7SnZRHcJeaokwY2b7FzgCW/wCbY4uFEESZISUrf8Eb7sJGNR3OMFok4I0BYN652JJHV0JnYSCdDd1/rBWzqrMttWfyZpDwToRBEgAtQlAkSAukSACFCXCBAB6pFnWFOS2klkiHKyk8ADfmISHOzIvzE4qnKxk0iMnOhAgE7RYtGQGVZMpdVEkrRpbjGOLnOO3fINqAgNN7PyI8s/3P32jzHmUk8yTdkPXOcWgL78cRh+WpzvPz3shnMeWwpJayexY3QS1dzpJHZz5GhR3I1OrcXCpa4D9PWvPx0+f/fz4fOyPv2jrlTveWAx03oO1p7VB67OhcYdSVRu5bU6APp8bHZ+Orz/Yf71sHtlEKBTAZr12gr9/vfjFj0Pu1sPAdoEkN6x8OuPfx7ivnNSVVZ1X+Qm3lIEqKMF+jhv2POnnw9f//YLASJAmwH6+F0A5nE3nFsZ/V48sk1KK8mUelbMOdTQf5mkYm4hBy83vLaDxlj11JPImYsTbQHoo7y2x33npGKtCj/3HbytTCCKG3bcJmUtyRZzjl0rSXG3K7RqbIUD5bGSFLQeQzZ9SJz7roPadw7HWzV+mRt5I3k6HrszUUl0f+DIXyWx+5stRdBlWY0ZN36Jfn98nv6p2HcOx1tVfqFbeRsRoB6A2lW7MfzbFAEiQF0iQASoSwSIAHWJABGgPlXeodMA32t85XPLpHKx89dJkMuYZuf6bjTZr/GV70bZwSNnZZyi/g+J1bux8iHRDYT+aOMuwlgpS62UcqJQIaiY/6yKACl5+hszbaOnMLN19WcbesVGl2QfrPKXS4RLgJwiQASoSwSIAHWJABGgLhEgAtQjl128pNVJQv3HGAToXOz8dRLJReXvLkJtJUQ7f6kPuATIo2QCTKjf+EOm3czu4XCoJAn3oogZ89k5Zf4IGJVH5RIoUGcuc4nJ0gNVWWTmEtKHGqiu0kqAHIp/q6otkIl/jjk4aw1JbRrNqDwqFzvGyqW5mrVcSNHoGOtEEyCHGqMFMvXYYX9qx6j8y8eT1oCFI6b0tJ6ZcCGSpF4lcAmQQwRIVwlcAuQQAdJVApcAOUSAdJXAJUAOESBdJXAJ0KpaEx92WATTMQcHe6Y25+DIwUtAbQ5OkYtdOMllynPJYnRZ5EKWJEalwCVAK1IzolRV7yJNk0oitxK3xbrbOn97Do6a9FUrnOQi+acEpkYblT8LSWJWC1wC1JansdcxpSf2dHZ/oz12N6a6JEcRGhdiH2zXC1wC1BYBMuoFLgFqiwAZ9QKXALVFgIx6gUuA2iJARr3AJUBtuYYdVUzhSXatxF2MMcojB8uZlWfMPdu2vGwkUTF2vcAlQGsqbB0mGEosQ/CZBUcSk3iCxQd+hJtYs72YtJFHaXuBg8foqRVOPPt9xbajXsp6LlatwCVA62q1KEWSdIdceNB7Nf7QdaNjxNSaLrshecVnVqv8Q164Wi71OoFLgBxqPNOUSdTYRuIpMmk99pgxjoenGLAPapS/LFwll3qVwCVADhEgXSVwCZBDBEhXCVwC5BAB0lUClwA5RIB0lcAlQKtqja4Hgqrj7sGzh8XHPiRpjt6HNy1jaL5utDGl2WX5D8tL2K5MoktZu8TFY1QK3HdVESDR0LhhS90fjFt59OAOBo9somvbD9WsLMJXQ8NoI+NgV3j2Jio1rFT+ZrXAJUBttfobq/XXnUjsTMq+o3UwXMcgRKPjXO2s+oYyCFBbBMioF7gEqC0CZNQLXALUFgEy6gWuA6CwY2HYqvDBdiwkQEa9wF0HCDsWhj0OHmyrg9bgZbghrcFRjGaKB3dRH2zl0pzILknybLXHHjbtNOdYByjsWBh2WXm8zVbEqqFi6zDfj6enp+VHGPZOkjw/L6HzsqVHT0BoPsjaUVd+jOW6GjpJ9iOzHREPThTorVl8qAOzJFatwDUAKjace22Fwj5Pj7jdU81oA56nRUlbI0mejxqwEG6SBMfsjEahuee2o8UST164fS2JarFUknqdwPU9RH/8/tMDAxSlnxaeQJAaNXgOkpWUJYkcYz6W2BNSWw8sq4Xb6yT6mUklqdcEXBdAxx0LCRABSmoCrgeg446FBOhAgJKagOsAaNmx8GEfolMRIKkJuOsAhR0LH/Q1/ihttEGA4K4D9D7sWBi2Kny8HQuTTTAq+5mE95xJhttDzPPyGjYMvw3hJewlJHlZ3o5mT3jxCTe2shJCsRhDzdzCjtnhROFDZnXcXQ/jF0mMSoHreohuVO7G8G9PssqJsZ/J601CVe9jTHiDfx5+e9Xrm/wrLa+ak7wsnqcQkBh66LVYhCY3M0lMAOIp5L83LH8Sc45dJRezWuASoLZO60yk+/pt0YLNTEzpib2LeSK7s2oVQbokNYiyJRe7XuASoLYIkFEvcAlQWwTIqBe4BKgtAmTUC1wC1BYBMuoFLgFqa30/k9qwJvgJAA1D4GUQbiQgDrEi/zE/0Ym7JwCXmD8Cpg252PUClwCtqVgjY2qYT4SY+XYd8Zm/wcz4HH/MtCzuy/Lj5SXYgogdyJz/bhcsOCpWFpYFh47JDlwMSYI5x1yEKSuuOjD7YdUKXAK0rtrfKv6cd7lnqBhtSHMEV1ofsQUp2g3byqJWBLshEQ+6sVgEOdF6c1SvE7gEyCH9tCAPFKUnPtPIOII8EMGV5yBJMhX52iMMlSKomDIgmaKKImx5IKpXCVwC5BAB0lUClwA5RIB0lcAlQA4RIF0lcAmQQwRIVwlcArSqZHQaC2zUrCAWV0bX97CleMbQ/Ltg3/EBQ/NPsAWRYfynkIsMnT/lVhb5ALwds3iSZTrCS9gUirCLq4sM6cG1XIxKgfu/qiJAosSWAjdhwm1R92mH+x9u2FO4YTM+89/lq+fDrNkWaGHnKTHnWELkbu8koLynqggNc44pMrnEPCNml8NZz8WsFrgEqK1KN2A39tIxqC5DmvYPQfINSHd5ZYjdzbiGMlRnZXaPlVzseoFLgNoiQEa9wCVAbREgo17gEqC2CJBRL3AJUFsEyKgXuASoLQJk1AtcArQivNqO6jV+ijHwLPcjvsbv43eX5TX+HV7j34V39H8g23fxu1E4+IMElN8L7I829mt8kiSL4Wv8xTXEmTZ7XdUw/gqTctIPiYtHvru8CxB9AE1Pwz9mzWnfIWQBbsbnyNkTvkK67nYRY60nnK8EvJaLUSlwCZBDDSvT0hA1dkDikZ4C3Zj0Z/8IiiHo8qSnk3EQR3+zGnNaknqVwCVADhEgXSVwCZBDBEhXCVwC5BAB0lUClwA5RIB0lcAlQA41ZtpIjMz+CdhUFmYNkEQP+BG0otF74Cda5EsuqghT7tk2DciRpF4lcAmQR8WOt6Gil38SM2L2z36fzNeRhVkXhMIcn9kzmwQFfI4ILVNululATzNCS/7LW3w6TUcVIaBcxIwIkYJVDq6HJj+sGoFLgHxqTixUMfiGrGf1SYsiEwulXUKMHLyluVBF0E2jcXCt0ZEYuz7gEiCnGlObdUw5LBGfYOSZBmat5ePPszJ09Tyw6CKohzNHLjrGrg64BMgpApRXB1wC5BQByqsDLgFyigDl1QGXADlFgPLqgEuAXBrSRTCXuk2XbF1iZLfTZ8zXeY57poaXMIyuY5FNma+xH2QkPhysplzYe6aOqgiySe9Ybrha7Mm6YhRiVghcAuSRycyU37BjDAgRIMIb/C7O8VkIeYkzxvYw/Vjcp8qkrzE9Y82iJCmCMJPGJEYnycEWkzTnOKM2dBlqHuqz6r4qc1bL8Y/KzNHyjI3OqgzQnk39Wb1K4LoAOu5tMG9ceNw67NEWGidAtSqB6wHo619nZD4vGxw85FYHBEhVCVwHQB+Hf5tboPc/zD8ecrMVAqSrBK4BULpj4X8cN5v7/e/HPVcecrsnAqSrBO5zVZVnoK8//nn47ueHBGjD4GUyJioeMcSQGIyWorbjGoZq8LXI32dRojw6icpFXyI89TqB6wZo3vXp699+eTyAXOYT44g1VneJRQYWZxVzjgBL3As3EBZC8e+Y5W5XrA874iSqPBKTJbNCM0MPy+JDLtyqFbhugGY94I6Fm2wppK0Riwwx2kCMtDUIiB7E6EZNeewijIbHl6RodDzmHFsBerSHaM/TgjxhyJOLPOVgwEJiSkPXSsxU5Ft5lLGLYHo2PRk56gWuG6DP88a7f/n0aK/xBMioF7j+Fujj8Ig7FhIgo17gugBaz8cb/s2JABn1AvcuARoKt5GdTqI8jSSOIhCgdv3cIUDY5PY4IgyPlVSSyMa4U+5JkuyLJK0iJAcfq7Q9bn2s/rgAglhkvMhWqbIqKl7C4qIZiNGrfyzZJoPqwSPWAYcBrsSMSJt5akPztsWH5ybBvTuA7EqqpJUkOCZWaHrw0bPcnoOjktTBDssZGHoIB09YzPelZCahacJBQl6Rf+1uhyIWf1wxRgPXoqlM4ml+DncMUKOZ1mlVY9/ob1QHYRehkct6jPREspy43WvJwWWIPU4xrnfMnf2Z8z7BJUCNbO8ZIE8VEiACRIA2igARoFb4eoYEiAA1wlfzaw0YShJ4JAmOiWnzg6fEUAIBjSKog3VZ7Bg5EQZSwY8eP5WDd3mIbasxtsotHqkOdbCK0UmcNwruXQFUW+oiLklxvOmJZ5fuGjunXz6jTEWo/BBDiTY+gV5lNVGaT1RjJpzoiMOCT7LjrRhuLJ7kEneIDjyhlOFkiccud4ZQsMiI9emz+HDfKrj3BFDlD0X9rRZ/tLWNZe12SWIcRVBtgW4U7OZIWhRpjvKAmumYeOTgUCTlqRRbrlUCVIzVHKXVveFewb1HgGJXrZ8WxKNi5FFDQpCLPthRBHVMmW0riZS7ePxJBixUjPacUnNmlOfJaMu9gkuAjCIQoPYZ4RIgowgEqH1GuATIKAIBap8RLgEyikCA2meEez8AVQaNxdahGA6fYDqRjYvjJSwmQW6DOtguhRQBSbVnROmWgFr+O5RuKdNOmXMgJrlE8YSDN9WcXGv9ihKLDz3AL0m23C24dwNQvNvpHZyqG8sOaUxiZbFXScbybkuMWY5YhBq2ihkrf9nGJFmdY3H3MSa7xORat+BzKP/salckHlXLQ5bEf1K49wKQbmnLjqHSUziS2P3NalEaIyOn9Wd2f6zyP6HmGj3RUKbVXd7WG0aAHgmgRi1vOFGeE1wCZBaFALXOCpcAmUUhQK2zwiVAZlEIUOuscJ+qIkB3ApDjIdcGqOJ5qwBVXjDVq7N+jU+WJIVbetRr9j4msYtSFmFslKXIv/bdSD4KqU9XZf64kKQsucesOf0aX31HLz8KbbtN6Xnh3gNAlU9c6iZMyoMbJ55ReRRN8hXPrL5KEeRE1bLUPyQWSeztb9P84cnK0r7b+rtOeSEHjVXuOU33BFDl2/pqG9+atmnnIuMIZgOuDy4DXB2nP0ml2GVZNo1TmJW6pVf03DS4BMgoy5sF6DwiQASoSwSIAHWJABGgLt0VQOEaXebq4kFSfbCdC/iJB6uy6IMlrVGW3mlA6uT5drEAAAwASURBVEKKslRiyuLaBzcs5jve4Q/3BdChNvskMLJ4QoUn03RU+uJHbdpN2MMUeYeYSlHMs6ossx9FsileyMrBWdlVtaQes+aSWsgvJKuSWt4n6r4AOjRnn9h/q/qvzG4uwoVVYlRRTmpR1JmHvPyOg/UddayXWqmFeCGqolR1b7xP8bRw7wSgluUlqlnHlJ7WAwuuTMeoougkpafxTFYGuMZkJO3WaktqrvLFR1eUijnhhEsOcAkQATpFBIgAESAClNbcPQN0XCc67DR3oQ3nCNDG++kZ9doA0NYRsk0ALRvOhSXqL7JSfXW+wHKFety6lgRuTIKDJniO1+XaWFaZi6jR9VouUoSiuPbBY35wNpjuqLCchtqsDFVRycFS3CUk3HJ3EbYAtGw4FzbJuMReGRVzDosDO8mokqgb9mTeSl2iU7an1cC17FKK/OWeumrMAqK8/VlFFQdLcQ/hj2uLldAWgJYN58I2PRfYrafRJTUae0cSFVN67G7s0MjfzmVLEpW/6lU8NWYFVC5EHyynxl3fUgS4BkDpjoVhvzACRICSbOG6H6IJEAFKs4VLgAjQdQC63EM0AXoIgC73Gt8aHA1XKDdiUxIE6CQqRr+HqfwduUwbkuj8EWLXU8mLZ3A0nihPmo7yyoPvWhGSbOH6AQo7zV1iwznDPCPUuLLiGIvQ+K+0jQh3qpVeklTLdDiYm+6u/aifKCtlWQT8s+pozCiomGfUDs5MV5S5y7SsDSumLu4PCXBdAK3n4w0384l/KOrvQ8U02gKVdkuLpcokHnej02yx1i5RW2QkhSlKWTMQsw5utnthsmM0tnPeMLh3AlBrZqodU3rspynXM5NdOHUiuwhmTOtCVCnN+mmV0j5YFUEC9NJpzvsFlwARIAJEgLIqbJT//AD9U1UEKC8cAVJZwiVA3zpA6gPPoGPePEBVc47lCqsLQyJmSj25lQLSjgiRmCXtlOfffntF2oMcXOZiLwUqSfa6cBOSjGlx06HzWIR6KWUAXplzJLYau7IIyWIPsmSILDzhu2Nw7wEg05xDc2CbACU3QZNXADfFm2zesLKIcjemSi72YsSSJExIKwunzTksoG2ssjV8JUaYl0VlUIRsuZldhF+WvvHcM7h3AFCjvzFjWkns9rr0OHovfUU6F+kG7BM5VkHXF7JeqboWdClVH1UueFXZ5s5fHQTIC1As7s0AsquOABEgAuQKr6YlQATIG15NS4AIkDe8lrQ18mnENJOgFmISBEy5Z5P9QiyvzmWH9xr7RBiqtAunL0Tqxy6LqgWpVDkRCidFADaNrX4dtQD31gDVbC/iv7pVRi1Jkb40n8h+ICf54S0siixZSi7Z1sCFJ/zIdgTOimxf1aFiuKGqL1nAI9z8YoNh2Z0Y9hq7ZTOgxCMHOt/i7wagst1ors5hJ1F/iLrRUUkkxnutSalPM+dYK3+zXbXLIh7V3DVqQS5E5eKsArh3AlBr/iliJjuJdYxrHMF7rWmxdf5WwGkDLjrGX6jKA5eqhROuuTgZXAJEgE4RASJAXSJABKhLBOgkgKTabgfQULh6kO6hAFJ7U+hB6STGTgI3eJIx7qXi9Oh9HK52C7YOiTlEbdxdeYokcQ0DlF8tsDHqJCjCOMAd0jIdYkUdMO4uy4wkQ/NZbh26G4DytUZsIMa1JAVwOTMFTaPU/TZ8wk3A57cVVOpYyUXLxRe1kFxIluRwqJFXMCn57+GZ8mtNLT56dD8A3WQo45RSysH2CIDp0f2l7on0hTiSFJfaWDBKx3SJAG3VmQHy1IIjiQnQpUWAtooA5WWBS4C8pSRAWVngEiBvKQlQVha4twfoFuYc/tIlxcTBthXEZHg8hhLr5hyubSBOuLKTdDcAOc0zsphm+im1pchCR5hzeMumijoFk4gdFrTITlb8mIqyr565asEhP6zqmGCIcU187gcgf4uybekN8egk3kurlTYaSmBJHbutsVqUZv5w5f7optdqdK6Jz/0B5Him8TwQ6YcQlcR7ZfXiYpBAFhGwn3Z0KU85oaM6uq7oVBGgk0SApGBwCdAWESApGNxdVQTIKC4BQsHgEqAtIkBSMLi3BWjDd51zvYV5r6xe3iu/hdU+gKn8u67oVN0FQO5PP87vQJP6GqOSeK/LLnJYh3L5DnTAHB98JTpknlF/11mtjuLTT/YdayxOdDN87gKgTY2O/kNUBxdtQW0mj/eq2sUuPI2pMZ65gbo6Gu2qdaLr6x4AGlFT2rPhsac8pmXF6r2qW8jzZHfrMibaAtCXPw7D95+KrQqLfLzhaRIClOoNA/R52dkg3+OgyMcbniYhQKneMEDvf5j/X+yyUuRj5d8qAgFK9XYB+v3vx82din2einys/FtFeGiAhsJ9awAlOxZ+/fHPw3c/nx+gZCZB8IQqyyYzIGAskoxyzJAek06JQJItW4FeSYNvVoaUf7mg25Y514YW6Muffj58/dsv5wfoIHOZpgwIxQHckpmkqgW4grxkDdwt1XNZCdAovz0vTMp/V83PYfNrvN6qsMjHyn+1HKq/0T2Roz+zeq/KNJfba1PHLAfdssQVbQfo7A/RS7prAXRHOgmge9MGgD7/4ZfDl798Ovtr/JKOAL15gA4fh8pWhUU+3nCVjgC9fYA8+XjDVToCRIDc4bXRQNzxUGUn7mcpSVRa74VcXq3ZOYXnLsuf6wYAFVYKB3imaHeR2C6IVQYCxiyJ+iFJsrSb6+ViKmw1svLbdXPrUtu6PkCNv7JGi7Lhb1UnOaFeLqSWrQZS3JGthkO3A6hlvCoex2OPI5cT6uVCapT/1kU7UQToqiJAa/mshxMgAtTIZz2cABGgRj7r4QSIADXyWQvPbDXglh41um6ZONTHrcskJ1XMJVQr5fnWS72NrgxQvNsgY1KeAojWeqx1ZvIkp9XLJVQp5TH4rkxMtuq6AEl7bY5TVMwHt3RWKuDEarmE7F7rnkq5VQToanozjz2ZBKD/URUBOp8IkCefdjgBIkAr+bTDCRABWsmnGb5uq1GbyD7mHt/qHPCcWi8XkC7lrUt0Dl0RoHVbjcScIwnNzDNWzTnG+7WC0LYab0BXA8hjqzHkMbXFdkaVi9Xo3OMd0rYa37yuB5B+YCmeenSMa7kvFdBTHdRWESCqSwSI6hIBorpEgKguXe813mOrMaQxyVajyej9qHIpDu6oDGq7rvkhcd1WIwEiWWBjTNOumHOcXBHUabrRUIbZE8Uuyey1WgefWAvUySJAVJcIENUlAkR1iQBRXbqVOQc8o+FpblZp53JqNVCn6nbmHOPYWm1jgrWHipEfkmViKEFdW3duzrHa1mzZxoS6gO58KINPO/cuAkR1iQBRXSJAVJcIENWlG5pzTKY5R7JfShETd5Wg7kNbAKpuVVjk0wrPzDkKWw1lJTRVTICQCfG5H20BqLrHQZFPO3x9nMKxVjjxuSdtAKi+y0qRTzv8LABR9yQBaKwq3XCuvs9TkU87nAC9Oa0BlCQlQJQWAaK6dBWA1McgAvRmtAGgUx+iZZ/Pymt8bZqOfB1aPPz0c9faANBpr/GRA/0hUWgqPMlMniUP4nO32gJQdavCIh8V3uisrAA9YEF87lZbAPLko8LPAhB1tyJAVJcIENUlAkR16eIAre5ayWk637QuDtBBTd7hNJ23pMsDFGf01Bqdsq3hNJ1vTNcAyLXHXO+FULcRAaK6RICoLhEgqksEiOrSFQBqLqlKW41vXJf/kKiNNoSmJQHx+ZZ1cYB0Z1XmTXy+Zd0BQNS3LAJEdYkAUV0iQFSXLv8WFjKircbb1DXMOWir8YZ1he9A1JvWyo3uBYiiXCJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR1iQBRXSJAVJcIENUlAkR16b8B+RcbQvmMBkEAAAAASUVORK5CYII=" style="display: block; margin: auto;" /></p>
<p>Remember since <code>hex_grid</code> eliminated some dongles, we may
be interested to see if we happened to lose some shootings on the edges
of NYC.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sum</span>(hex_grid<span class="sc">$</span>shoot_cnt))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 26935</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(nyc_shoot))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 26996</span></span></code></pre></div>
<p>So we ended up losing 37 shootings using this grid. We can also use
weights in these functions. So here, say I wanted to do a pre/post
analysis. A simple way to do that is to weight the observations in the
original point pattern, and then use that field as a weight.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>covid_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&#39;03/22/2020&#39;</span>, <span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>nyc_shoot<span class="sc">$</span>pre <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">*</span>(nyc_shoot<span class="sc">$</span>OCCUR_DATE <span class="sc">&lt;</span> covid_date)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>nyc_shoot<span class="sc">$</span>post <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">*</span>(nyc_shoot<span class="sc">$</span>OCCUR_DATE <span class="sc">&gt;=</span> covid_date)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>shoot_pre <span class="ot">&lt;-</span> <span class="fu">count_xy</span>(hex_grid,nyc_shoot,<span class="at">weight=</span><span class="st">&#39;pre&#39;</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>shoot_post <span class="ot">&lt;-</span> <span class="fu">count_xy</span>(hex_grid,nyc_shoot,<span class="at">weight=</span><span class="st">&#39;post&#39;</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_grid<span class="sc">$</span>shoot_pre,hex_grid<span class="sc">$</span>shoot_post)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAAdVBMVEUAAAAAADoAAGYAOjoAOpAAZrY6AAA6ADo6AGY6OpA6kNtmAABmADpmOpBmZmZmkJBmtttmtv+QOgCQOjqQOmaQkGaQtpCQ2/+2ZgC2tma2/7a2///bkDrb25Db2//b/7bb/9vb////tmb/25D//7b//9v///9UdSrtAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAX0ElEQVR4nO2di2LjKJZAVbVJajfp2t1kHuXt8s5MnNj//4mjt5AiJOACRnDO9KT9wODHabgXSVDdAARU934DcGwQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCDCs0AVZEIYga5vXe3ff3upDpIljEDn6rm7cRluiKqDdAki0PVt1Ob88C6uDhImiECfL6/DzYtmEEOgTKAHAhGhYqC+CyIGyp1AWdjnS5eFafofBMqGQALFrg7uRWSB7OefIG0CCXSqk6+Pp6r69stLdZAsYQRq/fnxa5bQC6qDdAk0D1TnXqfH5iZpfEu+Y3awicR+LoiJxIbqlu0nDjSE1b3PmR5ooFL+5kYYgT5fvv9uu6CLLorO89vUgEA2BTsuXbL+6Km6Y4NANgXvUl3iEAMhkAyyMASCVRAIRCAQiEAgEIFAIAKBQAQCNeSbZQcHgW5Zz/MFB4HyPtIQHARCIBEIhEAiEOhGDCQBgRrIwpxBIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBwIKv5/4iEJizcvUBAoExa9c/IRAYg0AgAoFABjEQyCALA88gEIhAIBCBQCACgUAEAqXDIReZCSTQ9a3b7kmzXyECrXDMZa7CCHSunrsbl+GGqLoiOOhCe0EE6vdLbWDLS1MQaELZ7JtNd01BoAl6IBeIgSbOVd8FEQNZQBY28fnSZWGa/geBsoF5IBARWaBqxEt1cHcCZWFN5HNhIrEAwgnU5l9KQu9eHSRMMIF6dUjjMyeYQB9PrUDJTCRKwy719dq6Vp7IPdwrpQeSztKpr9fWpTnnPGuDAgnU5FmPtyGcFlbnAelxgkrzd6+Rgx6fsCBUGl879O2XfiIagXKhkIlEBApFIQIRA4Uib4GUFIgsLAxZC5T9f/4JkLNA+QcgCYBAIAKBQETOAhEDRSBrgbJPgRIgb4EgOAgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAID0cijUAgbRwMogJCKSD09GMQCAdCGQEAulAICMQSAsxkAkINPIl6SILMwCBBuhwnECgHkIeNxCoB4HcQKAeBHIDgQaIgZxAoJE7Jl0HzvcQKAGO3Pkh0P05dPiFQPcHgUK2WwAIFLLdEiAGCthuEZCFhWvXP26/1tarZs8dWAYXyhPIbbzYetXsuSMPRy4UJ5BbxLr1qtlzhw6IXUAg8asQyG/Bu1Rn2zAC+aI4gYiB/FKeQP6ysPGh7Sws77TMXqDPP361/9ZtZtlyfes2985512bDvibzLsldoPOGQOdhozntjnPH/0oNo53cgyJbgU7ViG4zwqb/GZ9LZc9U/yBQi3sPtIGyW3wyuzZ7B4FaggTRRfRAxEAtDgI1OzGfq0pjRsu56rugjGMg4/SKLGxR8PTw/vH0eDs9bpTuNv7esCzn77QoHGKgOsC51D3MZhrvr11IGzeBTrU8W2m8vpYR+9dCirgMYY+fLw/vny9bQ1jHx9Or7ikEygSnILr69uv6tuHPEAFtzEUjUCaEORbWJ19p9kCMnz4JdDC1GeQSFSjzeZnYuAj08VT/R/xtZz76VBdIUaDcZ4Zj4yBQNz6Nc4U6ztUzAuWPvUDDcQrdQYqRj6f/QKDscZsHatifSLy+6XspYqBMCNgD+WnXP2RhPgkXA3lq9wiUrGSwLMxXuweg6EGxwJPqfVN2WI5AYhDItmB7qEsUQmf1fSOQZcFLG/6cZUFQTt83MZBVwetbl36djprGb+CYTpGF2RQ0urDQX7sxKborccS9BzrsRKKWsoMZR5wmEhuDMpxIRCAHXI6F7Z5u6LPdiCCQA8wDKRAD2SMS6PoX51Q+zd/JPQtL8/NEAIHkNPYUaxACiencKdUgBBKDQM4FEagBgZwLIlALMZBrQQTqIAtzLIhAgEAggqPxIMJdIKf1gezbhbSxFchomV+f7ULauPdAkdqFtMnoaLxJLh0s3y42kc/nwkKTczGCna9R7okg2VzabHI2WLAzxgo+Fc3lnOgkF1dAoPvgckqr6fIuXtq1qxCBYpNND0QMdB+yiYEEWZiPDIoszKJgmlmYM+X2Hj7IaB7IkYLjFx8gEAKJYAhDIBEZBdGuEANJyCeNN2p1NVcqNoPyQTYTiaaN4opfSuqBiHYCUFIMhEABKCkLQ6AAFDUPRAzkn6IEMs63yMuMcRDo+iZdnsym3XtAT2WOg0AnA3N2JUv59yFWssBlHmj/ep7zcM3PRXfxT8o/DwJZ4D6RuMEwVXTTzxal/PMgkAUuE4kbO8Z3KI7p5quT/nmIgcxxiIE2ttLtOXgPRBZmgaVAhotEj9PUCcdAPiUpWLhA80CDaNrjZXf/wn0OUyUPeWVNJC7b9/Muig66HQRq8viz445z0wDo8GKfIJAnXCYSH94/nh5vp91k7LJxyPXeXzcCecJtHqjZsGfzhLJTVT1//Ne7ftLo7l83MZAf3ARqjmZsrVDW7GZ46nbGTDaN3xhGl0/tjrj3H5LvhssQ9vj58vD++aIfwtp+5+NHI9ARJxKXHUrJHcwuTkF0Hdpszkd3h8uu/7il3ANpWYY0RYc4u4RJ48fhTXvkNeHfA4FsCDQP1G8KftGeOJ3w74FANlgL1O72fa6jRtE59Un/HsRAFtgK1HYtl/rP/iFVP+0KmthMs748qTxikoVZJV4ZZ2nWB1MfhxM6TolfF7bRb1T9/wyLW9YuLHwwLAVS1hmXLTUe/PvciFyq/hddDlPW34Zh8ayDKOse6LkbwZLvgRAoDrYx0On7724E057p47ldWQMIFBr7LKw7Dn+W+UMMlAuB5oFiV7fahHMWJqxdWPhYZCzQZvN+FgqSiWHx6nQNtA6ijc6J9thuENbHFOuRRjY0Wbw64THQoQfqwueLbHmOu34d61GtdawrC44tXp1yFG4v0HAc/ngLTC0aRyAf2At04CXu5o0jkA9ceqAugU98InG3dWIgLzjFQE0XdE4zBjJMV/xlYYL0qMQsrKVNxUT9TzCBYv+nmnDXEIm85oFiBwspByeRQKAjtZcgCHSk9hLEeib6eZyMTjGNJwaKTV490H66oj5vff2gQ3vZ4z4PFKldv6g9xrL3oDdxwX0mOlK7Xqk0f9fugxEuE4mi4Me2Xa8gkHdceqCEg2ijVhHII7kF0QbNEgP5JA+BTA5tdffUo1ftrfHh2U0wRTCEia5u9vojmRxcrxb/nz2sPEg/ZIfT0fj2jMTq1WTTA3G7xnUta5w/OtxblP0SDhEJWeIyDzSekSg4KRGBMsF9HqjO5gUJPQJlgvtMdNMDpSEQMdAdkcRABtuuyNs1q804C/tS9kvqRRZmhUsa3+ZhdedjsvOcuN3NSpwuBMQQnxx5Hsh6tOn6Gk+tQ4tIoOtfnE+s9/ATWse7XZSsxMogB4FABAKBiAMLRAyUAkcWaD2f2srIycK8c2iBdBUzJxiP3ATiqERkEAhEIBCIcDiY+o+o7bpUTAwUD3uBhp3mrn9N4qT6L0nX8oHtywdXD60uHyFv0+N0NL5ZGui8eVXG9W3nyg1fv8huh7N8dH5/8ezXKqrVR2HEJQbq7Ng6nXVchly7nr2nH2Q35Fk+Or+/ePZrFZ07GKTHKYhuDNo6oV65+jnwlpcIdG9cBDpV1f++bS1Rplz9HHjTXQS6Ny5BdH9Goj4GitcDEQPdGweBfnZKbGVh52GECxUDLa4O/HKzu7d6oeDs/rIMWZgtTjHQPsPVh9pxTvaLGPQJazvy6Oqhi3HHRaDajof30x23e1oPdxZFpvBlrx6D6kCHyzzQt191ZON2Weq0VYvDixfvBYFSwF6gJkJuQuPNi8LGfcF1pRAoE1yysNdWoK3LUptl7LtDHkEEIgZKB/ceaGOvjC6Nv75t9FPesrCtIkaFDKuDdZxjoPPGXPQwkXjSX/28367Zj2oRT80vTcUZPzhmYVW1tdfKOJF4enQWyGxYMRqo5hUyueyVMPNAgza1ao4CmQW2RqHyvMJqdg+kBJpIHAa46xsC5Y2DQLvn+vhoF4EOgoNAkkU5zNslBjoGLvNAMbY6MM2u+nJbhZcLA61mYSRljrhNJAZv17KD2CpuVBUdkisuE4nu65KZtmsZomwVN6qKkMgZhxjo48lDF4RAmWD5IymrjIfMwhDoMASaB5JWRwx0FBIVSLkm8Gu6tJ5EaWvcOva1cS7r2PrGHofaesshVYGGMsv1oLof9UuPsduDrBfY7bnm80wrxYvvuhIWqC2yWJGuUh5U6tiNYdYL7MZOfeeln74meEIgBBKBQAgkImGBiIGOQMoCWWRh+8mQyXYa662ThW2RtEArL9tYl1XRzeTY6ujiTu2wybEEWh0w+geVAW93ZOpuVWM0tVE7bHMogVZD1smGeci9ERtPsqkGERC7gEDbtcMOCLRdO+xwKIGIgdIjXYFWV1NdPRF1yrcXawKtnu1qnIWZpXKlk6xA8+5A7WVWyygizZ+26FZWmzQoWTSpCjQPSNQ4Z3qpcleNgGYvWhwKsW7SoGTZINB2kwYlywaBtps0KFk2qQpEDHQQUhVothJef3P6l/qoenNxmaF6xyRvIguzJ1GBZp3HvPtZPHqb3dR2OvQZgUhToFn4Mg+ABlGWAdCkyFrYQ9QSCgQCEQgEItIUiBjoMKQp0Fo2NR66qr7mVYvLENdypOUiLyRSfkhSoEV30d2dhqj1l5v1MXu1gCUpCrQIWKr5X004Yxbl7NUCtiAQiEAgEJGiQMRAByJJgTZOPFx5VvOivarJwryQlECGF/rNHlYOqW6+aK8tcCMlgZajislY1c76qMUMhyZGME8kJNAyrjWJlivln60X7bUFriAQiEAgEJGQQMRARyQlgdazsK85/Oxg6moWtszTDNpyg1wukEC7W0JZtbs6i7jTP1XLB0JAPxZIoHPV7+hzqTRb+5hWV83/Lt1ZjZBmF8eHjHaIpAIJNO6Zemv3d5ZUh0CJE0QgZUco3e7yCJQJqfdAxECJEyoG6rsg+xhoSrqmawnHXGyWdClnuE4XHs5eqj/B1RdkYYGysGFbKE3/o69u3uGsdSfzaZ/bYMptsWDUl5dCEAIJ5FqdOjpN/1MDmvGf4ZFOqKFjqqaS85dCGCILVE0DzkYrCHQc6IFARGICEQMdjSACGeysapaFzUa8WVa2SMuULEytaGOwBD+E6YGub3s78m5XNwxGikaLLkW51z25XiF9UGgCDWG7m8tvVtfP7/R2jH9vXy2qlChI2woGBSRUDHSptjeXR6BMSC2Inp5EoEOQpEDEQMchTYHGg1grWZha4jYV2qoIwpGiQJMQy6OklZLmL89cXalEue3rfcOCBAVS5p/VWULFHqUz0vc806wi41hA0hNoiHaqWRh9G87d6P5OU4ma2EctvdMgSEAgEIFAICI9gYiBDkVaAinZ+/xY6oLbvMj8oOmUp80fUW9svDEyNiuSEmhM0Kuhw1G6m16V2YTiVGaaStzobwy6InorS1ISaIhv1MBnOmHsNhk0hUm9QuPdzYjHIBgiXrIFgWyLwAwEsi0CM1ISiBjogKQi0HqitZaKzQ6qzp6YqtK2Shbmm0QEqvqeZjw3YxxLlHmgoQ9SXz32QXAf0hComlRRDZpiHHW6RzWoUv6Be4BAIAKBQEQaAhEDHZZEBNo88rWSiQ1TRGPnpGmFlCo0iQjUzwQqmXqljGjDTWWaRp0N2mwEg8KShkDTpI4yVs0neSp1zlmZet54X0wrRwCBQAQCgYg0BCIGOiyJCKScRridfo151eyOthWysNAkJJBemTFvVwvq7ECaqCQiUHVTxi015rnNzwBSZxzX3xTDVlzSEGjyZ2nR7GSxPoquRou+visC58ggEIhAIBCRhkDEQIclEYHMDqZ+KXZbSbp0WRjZWRASEWjqeqr5TbVPmiYWv04oGjWIQf5JQ6BRk9WeaJgKGv51G86otwh5iI0CgUAgAoFARBoCEQMdlkQEssvCbkpONT6y2yJZWAgSEUjX7Sj3x9nE4eXVym2ITRoC6aIfnUGV5i9EB4FABAKBiDQEIgY6LIkIZJqFqeVXb0Nk0hfIb7vgmUQE0gdBjE5pk4ZAen8wKHEQCEQgEIhIQyBioMMSSKDrW/fza7ePt0rjb6TqyRJGoHP13N24DDd2qlvrgaaCu8sowN0IItD1bdTm/PBuUN3Sn/F6Zg5XpE4QgT5fXoebl/kgtuxfpocR6JjQA4GIUDFQ3wURA+VOoCzs86WTQNP/mGRhyjPjX0iOROaB4KggEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQcTeBIBPuJFD0+pNptJgPGvktFPO9FvNBI7+FYr7XYj5o5LdQzPdazAeN/BaK+V6L+aCR30Ix32sxHzTyWyjmey3mg0Z+C8V8r8V80MhvoZjvtZgPmt5bgCODQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEUEFulTVt18hG5jx8Z+/Z40Gb71ddv05bpvNQpXLtuJ+zQtCCnSpP9Yl2kf7fGmXHh4bDd769a2u/Vw9xmyz9qf+lPO24n7NSwIK1K0KfHoM14LKpduAYWw0fOsfT82atfUPGrHN+j+T5+ZDPsb8oJsEFGj8gsM1MXGpntvFz8dGY7Ve/7cfvc1GoOiNaggp0I+mW71E+2SdQEOjsVo/KU3FavNcD1jRG9UQUKBuXI43Orff4dhopNabJdcjt3lpI/fYH1QHAsnaHGLoqL/l9e3hvQCBChjCui0f4o8mTeCV/xAWO7qLH0T3+6fFj2frhgoIomPnl5fIafy490zMNjtdLnHnDrbIZyKx78Xjza99PA1bFsWc0zs9vHfO5D+RqMy6R6EPA8ZGQ7d+7pbyatqI1mbNqW7zddZW3K95AQdTQQQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEsuDz5/u930JylCXQ58urW/F28YLTsKrvbmUXq2YODQIZ0Qh0+v7nz/9/mirQV+bczAFBICO6tVjrIaxZXWW3MgTKlc+X/3nqFkc5d8NRs7BXu/TySD1Offvbt1+ff/yt+v7nS1+0eaQTqCny8dSusDJVdlFWrK9vNM9Pnn38+PtT+3Rb5e+h5VwoTaBmcfn+/80CUc1STecHJTQ+NQvBV7VAL/WjbU+iPPLPVqB2kbBL9TpWdmlteryNN2Y9UK3Ta/9M09DQci6UJtBzK0DX6TQrUl2+//mHsjhTt4LcqdHluRuKxkfajuXxNq1nOVTWrTFXD3LjjYVAzaO1pX2Vz7c7Lonpn9IEem3/dCvCtW6cKnV1wXGZvKGksnBec78ZffpNOcbKOsXGdS9bP2cCvSpVKi3nQaECdavTVd1YpBQ4fxHorApUB9H13XaXnteFQOqNuUA/filVKi3nQaECjWsKXt/+Wx1Odnqgn++dDv0oZ9YDzQW632qGYShToOkXPj/8602JaPtFlxWBxkcaBX6+DwIMldR/jGKgUxMDvWaY4ZcpUJsLDb3ILKKdcq7h1+7yrD4L+2edYw1r606d1NcsbObkmKj1KnYxeSYUKlA7G1O70q26rIbRp/rx//v+W+ku+nmgLvRp07Bucd+pyGIeqKlEmQd66qeL+s6nbzkXyhLIEF2W7XQwNaOMaw0EmtH+2vOpaS9V5gsC3fpjE92q8xdPOfZU5d8RCEALAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCET8G79PmIUlhwtOAAAAAElFTkSuQmCC" style="display: block; margin: auto;" /></p>
<p>So you can see that the pre and post shooting counts are highly
correlated and a few maybe outliers.</p>
<p>Sometimes we want other feature engineering RTM or Egohood style,
with density of nearby features. So we can calculate the density
(assuming a Gaussian kernel), for liquor stores <em>at the centroid</em>
of our polygon features. Since the area of our hexgrid is half a square
mile, <code>(5280/2)^2</code>, this means that the vertex to vertex
diameter of our hexagon cells is <code>hex_dim((5280/2)^2)</code>, not
quite 3300 feet (see also the <code>hex_area</code> and
<code>hex_wd</code> functions to convert between different hexagon
sizes). So there is not much point of doing a KDE bandwidth for under
this (will basically be the same as just counting up the total inside of
the hexagon. So here I do a bandwidth of 1 mile.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>kliq_1mile <span class="ot">&lt;-</span> <span class="fu">kern_xy</span>(hex_grid,nyc_liq,<span class="dv">5280</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(hex_grid,<span class="at">zcol=</span><span class="st">&#39;kliq_1mile&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAAllBMVEUAAAAAADMAADoAAGYAAGsAAHQAAKwAAOMAAOwAOpAAZrYdAP86AAA6ADo6AGY6OgA6OpA6ZmY6kNtQAP9mAABmADpmAGZ7AP+CAP+QOgCQOjqQ2/+uGea2ZgC2///ZNMvbkDrbtrbb///hOcb/Var/dYr/kW7/lmn/sk3/tmb/zTL/0i3/25D/7hH//2D//7b//9v///8tU3bkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO2dD3vctpHGqWZvdbXatI2c6lLLdpqqusZnR9nv/+VOJDEDEAMQAw7/rfi+j/0MCHBBAPwJABezYHOBIIOarQsAXbcAEGQSAIJMAkCQSQAIMgkAQSYBIMgkAASZBIAgkwAQZBIAgkwCQJBJAAgyCQBBJgEgyCQABJkEgCCTABBkEgCCTAJAkEkACDIJAEEmASDIJAAEmQSAIJMAEGQSAIJMAkCQSQAIMgkAQSYBIMgkAASZBIAgkwAQZBIAgkwCQJBJAAgyCQBBJgEgyCQABJkEgCCTABBkEgCCTAJAkEkACDIJAEEmASDIJAAEmQSAIJNyADXQG1bhJs8CUE0mB1XTnE5da3PgSsQA/ZYUAFpHr9S0ahoObF0irQDQLuS4OZE9XU2bAaBdCACFeWnjIRYACvPSxkMsABTmpY2HWHmAmsgGn8mmrCkAtAO9Pns1/bPXqeEAp5BtxGfSKesKAG0uz8wpDLxi0XAgfrbPp6xeerIAaCP5USsOJFLyn9ms+GQB0EYCQCIvbTzUCgCJvLTxUCsAJPLSxkOtAJDISxsPtfLrp6dhoEmk0EdyKRsUnywA2ky9B4fDoXTgiEumbFJ4sgBoQ411OhUpmxSdLADaUiPTnoqUTUpOFgBtKQAU5qWNh1gAKMxLGw+xAFCYlzYeYs0L0JoNDoB2oKQ7xykMKFM4txXLThYAbSUbM1GKd/RYq/RkAdBGso1a5fFs6eKTBUAbCQCJvLTxUCsAJPLSxkOtAJDISxsPtXorAH1LCgAtLeP6aT6F8+frLFN+sgBoCwXeGOezO+gDrT2XUk6jLiCXC+/14VKWqAFZALSBfAdy7tT4wHkYSKVM6ajmrwJZALSB/IyFqDjnAomUignRcjMjALSlAFAyL208BICSeWnjIQCUzEsbDwGgZF7a+KPr9YGKFtN7LFrLgXMYSKf0n61btJ+9EmQB0NpyQJyqmIlSpriAzFwLsgBoZU0atXLD2HaLHABoKwGgbF7a+GMLAGXz0sYfWwAom5c2/tgCQNm8tPGH1rT1U5FCUExw9JipHmQB0JrqXTMcEn3g9tYd9IHW3iZOEwenrDtH/mDOmpAFQOsp0bXcdmp84JYCiu6o3OmIlPnqQhYArafE5IZ4uRWB8oRIMe0RKfPVhSwAWk8AaDwvbfxhBYDG89LGH1YAaDwvbfxhBYDG89LGH1TBYvotLbP3wLSWA/Q0xqfmluYn7cEwX23IAqCV5O+/e0xPMBPRdKaUhKOHmpl4F5i5qkMWAK0jzahVMZ5VjFocMW99yAKgdQSAynlp4w8pAFTOSxt/SL1ZgP4vKQA0twBQOS9t/BGlWj/Np9Bnd+jOAYBWUOCN0XPhnDba/3d37qAPBCl8MMWd43KJUuauElkAtLx8ByK6lrtOjQ/I7og+fB4GRjsdd12fMn+dyAKg5cX3Xk5u7hw4dxQQEyKe9sQBxYLFQvOfLmuyAGh5ASBdXtr4wwkA6fLSxh9OAEiXlzb+cNohQOZ7A4BWk19Ml04bPTmt5cBteMqYO8dZ4bThU6IimfskALSS/P2XZBAzd2EgxVl+346S00Zyd445nIMA0DoSKxh+bLoTw1duGBtzTxTDmCiBSJnFPREArSMAVJGXNv5IAkAVeWnjjyQAVJGXNv5IAkAVeWnjjyS/9Eks+FXSO3r6GgbqfijvWMg7bciUWfw7ANBa8ntw3IZ+Go4Y+h8cDE7jA+HOwQfCnUOWIEqZw78DAK2nhKeY7HQoIDuqYS+k2ixIliBKsft3AKAVJX1VxbSHI8RUKZ4HabYrkyWYY9ozzJEsAFpeAEiXlzb+cAJAury08YcTANLlpY0/nACQLi9t/MGU2DVBLMCzO8fYTgv0EBYvzWv24JhjAX6YIVkAtKwSe3BEzAQ0RcyIvV5Ur+7JlWOh3TkA0KLSOCHGw9e8Sxm+KPNWjCwAWlQ7AmjmipEFQIvq7QP0n6QA0EwCQBV5aeOPJABUkZc2/kBS/Rye+JHrp/wZR8sUd46lakZWAdDvPzXffaKDr9+/Br/+qWn++EucV+4ah1XONWPgwcG+HeI0PkjuznH2rhzLvVJlpG5kFQB9fNf+6/XyvmXp13epvHLXOKpGXDMUnQ6niE6HuyPqdE7DwCoIVQD08uOHvt951c/N39rQxx9SeeWucVSNLEsopj3R9GfSL1OXrBzZMkAtPC1Erf75S3v0+z8+pPLKXeOoOjRAvbpTQoDo6C/NHz6IvHLXOKoODVBwqgTo658/XF7+/inOK3eNowoA9ZIAtfIxACgjANQrnEQDILXGXDNuaQF+7GUrvU0twLtvgMZej7F89ciWARo8xncA/fr6KP/1r/geaExFMu7KL1u5jZmpednK0vUjqwDo5X33RWL/7N71QD83wVeLACghxdikSBGj1jk3fCXGs4UrSFYBkDYvbfwRBIAm5KWNP4IA0IS8tPFHEACakJc2/ggCQBPy0sYfQNNeqSJSCBfFz+HlyurCNSQLgObXmGtG+eBMu3kID46Oi+SGHOmDRetIFgDNrQ07HZGyYC3JAqC5teG0Z8V5EABaTAAIAJkEgACQSQAIAJkEgACQQWML8KNOGxSghzDvtEGBngm/B4dcgJcpy9WTLACaVXpmpNNGYg8OR0ZuDw7hApRIWaqiZAHQnFpt1OILiohsysw1JQuA5tT2AF3KKfPUlCwAmlMHBOh/kwJA0wSAAJBJAAgAWbTe+ilfMY64lFPmqSpZADSbcq9Uub2teotKl1PSaaNLiZjIO24s69IBgGaX7Fp4Dw7eEkh0R6LTocyynY5gIg/JKu4cAGguyclNvAdZYkIkpj2cW3basw8BoNkFgACQSQAIAJkEgACQSWsDlHhyj1Mwib4eJXZNEK9UkUvz5LRxoQV4zk04bYjrxXG0Ei+X5hepL1kANIcS+7YQOxy4DeHpaHJfH5IDxjnA5xQ5bYgLxt8SMmfCOWihGpMFQDNoZNSKt5JK7BzFuZCVCxbigvEpI+6JC1WZLACaQfMAxLmV580A6G0JAAEgkwAQADIJAAEgi0bXTylA3Pg112j9NMjN3fqRVdLT8JTRH8rTKZcoYKszWQBkVeC0cX/vDvpAa+/p3SqpPTgCDw6f2yny4EhccODoIT4jDwLfjrmcPADQXPKdzn2nxgfuKcDdEfU+woeMcxMdiLwgdy35TqecYq42WQBklJ/lEC/3IiDmQTz/ya1gaN4Bn5/2KFLM1SYLgIwCQADIJAAEgEwCQADIJAAEgAx6fdSiBfiHpn/kemg4QE9jbkU+WLSnhzC/n0KfG++nQIvpKacNTqHAKQwoU6wVJwuALHKotPi8qkXlIQy0lk/pPzDyGp6L39GlP1W+OMXGTJRiqzlZAGQQj1oPTiLghzH+TG4YGxvPRMSUUUukmKpOFgAZBIAuzb+TAkAqASAAZBIAAkAmASAAZFGwfupwYW44gk/hzwh3jvMwEDhg0J32H6aI0zAwcWVV1Kei7mQB0FS1kPSOG4+Pj/3B588dOW1MH/FAp/BnyPPjlnbmEL4d/SM979Ax9OuI/DRoE4+zD9S9k2VQn5pnewBklO9jHnu1+LRqKCbojvgzZe8y2R1le6GRz1BA0R2JbJX1JwuApsnPdh6JoM+OII7gU+gzCv9WMSHimQtfmSLynzmLD+cnRFGu2pkRADIKADkLgKYJADkLgKYJADkLgKbp7QM0fvsAkEmvT1q0AP/UuGeufzf9Q9hT/xjWnkLfCbnV9fvyTgspR4/utjbR94up5fzgMxQ40bm9TS3N92VLvYZjtAXIAqAJImYemqdXdTR1rdZ87iK6GDrDcXYh56CxvV5yjh4nuflLnpko5ZR93Q8zc4lTcnvKhE1AFgDVyw9ST724FSniqRHDWN49sWI84xLkRy3TeJYb4BJtQBYA1QsAASCTABAAMgkAASCTABAAsihYP3W0NK4ZGyaKF1R5zZX4GXnvAdmio8clkZL/DAUIihoXkHwjkAVAleqdNjo4np9bYpr2pX0tQhTx1Md2XwWRX4fba8Fv1XE3/hqWgaPH4J0sVIqzcAEpH5zGfTuSB7lmIAuA6uSdNp47NfTORx/RDHuhx8DvjHqfu2Gg7q1QriCaTkemlDsdkZJuB7IAqE68YPHsxC8NpRgxD3psounPnQiMTIg4gucyVBLFtEekKKY9IiXdDmQBUJ0AkLs6WQBUJwDkrk4WANUJALmrkwVAdTowQIP7CYAmqV1v7x/Cnvunrqb50riHsC8uon+Uf2pP5UX7/iEscOe4CwODF7TchoHBon2PwGugL4nKnUOmdExU7s7QX3DQFwGgCWocPK77aVn58qrXJ/nGBZ4p5cmd+uj37YjcOe4ETfSCltuGA7cET2/PRNOlipkoZcqOHuLVLQCoXjR6BcPXl15kv/gUOjW/lJEfzzhCMZ6VRy2ZUh619OMZD9hDAaCEABAAMgkAASCTABAAMgkAASCT/K/fiRIHTuMDnMJrrnl3DgrcDQOjL2ihALFQ487BKY4F044eAGiKeleO5/47oKb59q0lp7Uu4Nbk+8012Osj785RPrj1Hh9jb2tRHJzCTTwq3DnkQd8U1CQAqEqB08a3TmS/kV9HsL1PjTvHlO5orU5HpFwA0GTxIPWNwOEALWnwqRVLGVMmRGtNe2TKBQBNFgACQCYBIABkEgACQCYBIABkULsHR/8Q5h6/mua3xj2E9X4dwQ4Ij+TOce9fqdGhkHTnKKWkluY7NkYW4HkPhikL8GMpAGiSaA+OZ2LmW/PbqzqayK+Dz+3ZeWzYF6iemSCF2Bl53Y+gqb/bE12ASikAqF7+96c8av3Wyy9l8LnR6CWHr6rxbMpSxryjVmoY6yoKgNQCQADIJAAEgEwCQADIJAAEgCwK9uDg9VPHj3fn4HN5d46hF0fd+imn8PopBYiS1dZPRQrVFADp5LbdaPFhD44eocCdo/fkYFeO4GUrDqGMn8adD+RSBu4cCg+Ok9VpY/wA3wNVym/8wz5kwp2DHT3Imexh6Eym8hRTpOQ7HU5ZptPhlAu+SKyV/7kpzXbkUkbkzSrdWTW+qoqU/LQnmv7MPe3hwAUA1QoAASCTABAAMgkAASCTABAAsolegkH7KXwhd45vtDT/H+fowXsw8MtWEu4cPQrhy1bCiNGU8n4Kczlt5FK69hi0CwAqq3sNj/s1WOMe5b8xRM4X6Nn95sVt7dK9bCXjzlHDjHipz9geHIswE6S45qBm+VdSACgh8YNUHsf8JlN8bnkpo2bUikavubcTr0jhCpJVAPT7T813n+jg6/efohgABIDGAfr4rv3X6+V9S04YA4AA0DhALz9+6PudV/3c/O01FMZcABAAGgfoq0Om1T9/aY/CmAsAAkAJgHp1pwxxOS5AwdsNiB9eUOXfxfO5CncOB0XVyuqZnr6GAeMrVSpSuDXI1vVAxwXIuXP0O3N0CJFfh3vZCr1w5aJz50j7aQinjVsfqHulinfpmMOD43JxXhy+PcgCIJW8Owc7bVAvxC9bIXczhTtH3lOMOx3RteQ7naW7I9cEg/s5cRLtcTrYJNovZYh5EM9/yOFVsZQRr2lMWrBYa0KUbhCyZYCGD+0dOMd7jAdAcYOQVQD08r772vDjD+1BB5CLifLKXeMtCADFDUJWAVCxcSvjr1EAKG4QsgBIJQAUNwhZAKRQu6ruHsKe/CtV+oewZ3rZypPbeuGzcOcYe9mKe/aa4LShSukRMC3AZ5qELAAqy70v5Ylew8OvVKEX9PyHUlz3M3DnKL1sZZrThjrF6M6RbROyAKgo/j4nHsae5SvCePiipQzFRuPx8GUbtUTKlFGLI/KNQhYAFQWAUo1CFgAVBYBSjUIWABUFgFKNQhYAFQWAUo1CFgAVxe9LaYYLqs/ByiqlED/enWO4oJp62QpxU+O0UZPiWJi0sppvFLIAqKz+fSn9o/wTvXDluT/gDTko5TO5crA7B/2/934d0ZtXboU7R9lpo+bA+3fUu3Pk2oQsANIocM3g9zhRp8OncAr1PvwZ7sKoF5Ld0bAXmsudY5buKN0iZAGQSn4uQ4OU+AldE01/gvmPmAeJCdFCSxkiZcqEKN0gZAGQSgAobhCyAEglABQ3CFkApBIAihuELABSCQDFDUIWACnUrp3TAxX7argF+MfGnfLoUh4aXonnz5Blvw56GvNL8+4hbGZ3jihlAXeOx6QAUCh3l9k14zO9hufJoXIhZj4TM4+emRCiYK+Xe6KJnYOWcecwOgdl24QsACqKxxkekriZIpsYteII754YD2N3Cy1lcETFqMUR+UYhC4CKAkCpRiELgIoCQKlGIQuAigJAqUYhC4CKAkCpRiELgIryK54OAebGO21QgCjx66fDiPCH8hQgfpZy56AAQTGvOwcAKqv3ubiQX0d70x0tgdMGRTyEHhx80H7mIdyq4z707bgTW3WcZ3XnoP+nBdw5AJBGgdMGdyCia6nodO6Hvc81u3MAoDrxvZeTm4ppzxtaygBAdQJArh3IAqA6ASDXDmQBUJ0AkGsHsgBIJe+0AYAGDQKANGpXyF3gzi+md2wknTaiFLEAn9ppAe4c6virk7u5F9pPg+9/npkxFyCmieCBO0dd/LWJv5vhNQcegfKjVjR6yeFrZLepeUctjqgYtTgi3yhkAVBRACjVKGQBUFEAKNUoZAFQUQAo1ShkAVBRACjVKGQBUFHezYKWPomBkfVTTqFT74eB0fceuDtetUpaTiEo4M6xtgI3C9pP4568MR5o242BB8cgZeDB0X84ePNKn+ti7hwdBn0A7hzbKXCzoO5Cdi2mTocCfJ3NOh2Rkm4RsgBIJb/EIOZBYkI0Zdqz0FLGlGmPSEk3CFkApBIAihuELABSCQDFDUIWAKkEgOIGIQuAVAJAcYOQBUAKtUvZ9JTkHTA6JsJl9v4hLOW0QXZkAd49e83hznFqONAjsOTLVv4nKQAUyt0Ovst8/4Wjz0PWaePev6CHCSR4mE2+TjUz0mnjbGCmxp0DABXFI0M8jPE4VjVqRaPXLkctjsg3ClkAVBQASjUKWQBUFABKNQpZAFQUAEo1ClkAVBQASjUKWQBUlF+jdDfar4U6SqrWT8nuef10fCG1axSyAKiswEuCfC7uvF+HOxh32hjswWF+v8rp5A5O7KthdNrIH+TahCwA0ij4k6fuQnYtUzodzq2i05mla6lISbcIWQCkkp9jiHmQmBDVTHui6Y9q2pObucw07REp6QYhC4BUAkBxg5AFQCoBoLhByAIglQBQ3CBkAZBKAChuELIASCda/g4cMDom/NL8mNMGWbkHB9niMvuJUiyuGXDn2E7dvYzuf+Ca0QfyTht33mmDCSQkc8wENPX38rwSM3DnWESJESg3WF37qMUR+cYgC4DUAkBhY5AFQGoBoLAxyAIgtQBQ2BhkAZBaAChsDLIASKvUWqij5M2tn3Ig3xpkAZBOkTvHrffrCPbtGOy0kXbaoP/nSqeN0+x+GsqDXHuQBUAqJdw58l1LOWXPnY5ISTcIWQCkklzKyE9uFCl7nvaIlHSDkAVAKgGguEHIAiCVAFDcIGQBkEoAKG4QsgBIJQAUNwjZ+6QA0EDBwrjYTyPYG6GUwsv5O3TakCkXF5FpErIAqCx/l6uZCVKYwIiZPThtyJSu3hp3DgBUFI8zxxu1FN9EA6CiDgzQSKOQBUBFAaBUo5AFQEUBoFSjkAVARQGgVKOQ3SlA/PRIgSa/LuxPyX2mIrdUCdz9Pfr66bB5yO4SIHYkoIBzMcicyqekP1ORW5Bte0c54JbhM64Z+YMzuYDknTb44KR3s1BUriI3caC6RWT3CNDIn0jm1Il/cPkSiG5ioU6HU6pLPdq9Wroj5T0iu2OAUoN07tRpQ36+BGJ+stC0J5r+2EqdbZSq1lHeI7IAKFkCAFS6BlkAlCwBACpdgywASpYAAJWuQfY6AWriUwFQ0CoHB2h8uZjOaMJTpzosZEsg3CwUC/DBThsUOFMuUW6ccmIvjlypLw0HiqX2f1/xZ24ask0YkWod7V0iuzeAyvfft+QEZoKUfAmiu3zOMpPfaWPMaYNT+qKcR0pNTTL8uxlrN3/oP3PzqjZwEwbyf5+6+0R2ZwDZet+KlHwJ5DhTHrXyY5Np1IpbcqTU+c/cOInAlOmVvyBZABSXYIcA1bSbSAFAAKim3UQKAAJANe0mUgAQAKppN5FyKIBWdGXIF8HdYL/i6SiZaacNTimXekq7ySSHC3PDEbIEFXeK7J4AmsEToeYgXwzhc6Fw2sj7aSQPFAWtaLf+sbx7Yk8j1Dt6OHz6/8F1Cg2SvCbZHQG0eKej/oNLdCCy06FATadDAUPZEqUVXYusD1k+JbqOwsMuypLsDgFaatojU/JFyc2DbAsWHGEpmyysmNwoTp1wnWFOZAFQsigAqHRRsgAoWRQAVLooWQCULAoAKl2U7F1Sg2x//6n57tMg+PVPTfPHX+K8ctdQlwkAybKJta1EYbMAjSyMrQnQx3ftvzD467tUXrlrKEs04mJwWiolV5SEAwY9hE1w2kjswVEsG5XkVNrnoG03eghrBg9hbcQwQN8KKZxDireLbBmglx8/XL5+/ykMfvwhlVfuGroCuafLxZmJUhIlyd3/up028imKslFR6C5nC0vtdtNwIErxzFD1bhjJyfiUAerVndIS05Ljg7//40Mqr9w1VOURXauil58lRZQkPwKZRq14+BopGxclmyLbjccmRcqE+yMvTLbcA0mAXn78S/OHDyKv3DVU5QFAqwE0i0wAff3zh8vL3z/FeeWuoSoPADoQQG3QmTCv3DVU5QFAbxagxCT6AoAAkLNlgORj/K/ffbp8/eus3wONuBiQXShFlGRkLdSyfsop5bJxUbIpiXajQDmFK2pBqgagl/fdt4fts7sL/tzwV4uXeQC6RC4GpxXcOei/LAr5XJx9oG6njfxBVXHYzSLv3xG0G7l0FFMGWU9UDUDavLTxudNX63SKf9jTuhZFSnWHKPfg0LRbMSXo3Opukr8q2f0AtMFSBllZlCmTm3KKomyVbZZut5qUCRfsMiALgADQFAGgVLP6ogCg0kXJAiAANEUAKNWsvihXAFAVJvkUkVvd1fcD0HoL8KkUUZruhrcpfWCK04ZIUZWtorn4Jka5BWelUwYlGOSmLsHuAFqfmSglLo/fNcPCTJCiLpu6uU7+GT9HYDIlLoHGbUQUgOxOAFp91JIpuSKd5hnPKsqmb65Tk4vIn6ppa0UJyAKgcssDoEQJyAKgcssDoEQJyAKgcssDoEQJyAKgcssDoEQJyO4LoC1fNJIp0mmmldWasuUaqYl5EeumqYXh7Kn5EihuGNmdAHQpOTmscZAo0ql3pmBvDP9/kQ05+CDTQuGDe3SazyDXtME7WcZLoLpfZPcC0GVLd47cX17gTDGl05EpFWUTzROlyI5K0wvVt0HubpHdD0AbLmVwRL5sU6Y9IqWmbPnWKTZgYmlmjjYY5kgWAAEgZRsMcyQLgACQsg2GOZL976QAUFw2ABTlSBYAXT1A8guefIqlDZIX3Q9AxsX0WVLGitcj0JCjx2LuHJwiSnBKFpJPbeLl/ESKqgS620V2LwBtxczIHYsK2JJBATUzU9w5cjw3Sccld6q8/zJFXQLN/SK7E4C2G7U4oK/n0ksZ2SJpJjeztKjihpEFQPpG48JuBZCm3WZpUcWFyQIgfaNxYQEQAJIpFYUFQABIplQUFgDtDaAN1085paK0BMVS7hxRkUbKNvIZS+so2oDsHgBqC07/Txsd1FT4Uu/OMbVs3DrjbTdoRGWLBh/mNhi/1uC6ZLcHaMNOh1NqqusKXePOMUup80URDVnfuSl2AYmuSnYHAJ2omnFgtZSa2lKpFdOeeP5jK7W+JefJrXAtsgAIAE0RADoBIIsA0AkAWQSATtMA4obbDKAmsks6bSjaYXuApiwXz5NSsZeAL2pDln00ekhGluZFCeRuBtlSc0qqBGHEJfWZ7HX0Vc61BNkdABTWfWlmghS6cEVF4/tCL04ZdecQJaAL5+5/UOrL4JRECXLuHOPX0Vc53xZkdwHQBksZEwo5klt+PJOfiS88MgLFp8w00umrPNIYZI8O0IQyzgOQpg0qSlDOfl4BoHoBoLAoZAFQdRkB0AUAASCjdgbQ+uunNRUUhZTXOdPT1zBQ5TYiS80XJquo6YSKTdGuAPIuBicfWPSgpnrKgpLTxtkHUqeVsw8DYWyhPqaK1WtHAK3W6czxR2osQTl7GVDXZ0V89gXQiZomDiyVUlO5XGl3MPGapT5TBYAmCgC5cpEFQHUCQK5cZM9JAaBSaQGQswCoTgsDZFr+WlO7AWiBZfZSSk3dEgV2mZQXxmWKpjFc4MYvpkf1md81Y4r2AtBKzAQpNTVLF1nvMiFTyo3RkeFes5yoT/I6G2gnAK02anGgpmLFCje5iJGUkWypjPymd1Gf7HVWFwDanyoA2l4AaH8CQMr48BQA5AWAlPHhKQDICwAp48NTqGUass0wYvaUmootKflj9KDUjh9Zn82KK7QTgEZ9FOY74OvUVGtJcXECb4yemI6e/sAhVLdrxlraC0AXnZfUDJ3OlD04llKi1NTp3AwD1btmrKX9ALT8UkZNXdaRLDVPe+LADkvfCQBtKQCUzEsbH58GgABQVXx8GgACQBXxkxwW3gZAvuoAKJWXJj69YN214WJ7cOxEg8X0qNTBAvxNGNhP6WNtBJBvLwoswkyQUtcsC4p5lqXu09kF6KZpwoh9ahuAZh6byimVrbKgRkrNp0R2O18NhQDQylIAdFUCQCsLAJXzKscDIAA0klc5HgABoJG8ivHrOW2QrW2WxTRW6q3LNkkbALS404Y4qG+WhRSUjZw2OHbrsk3U6gCt1uns8A/bl418NChhR4Ws1PoAnehWx4GlUqY0yzList3sfH2iQgBoRb1pgP4rKWCDgUoAAALeSURBVAA0pwCQLq/ReAAEgEp5jcYDIABUymskfnmnDUrZds+KjHzZ9u2jUaF1AVqWGekYsafup5Nw2rh6rQrQ6qPWDu/Rnss2RW8bIGhxASDIJAAEmQSAIJM2AehA66dvXis/xjfuhi/qwTGxKaApWvub6ONs/HMQvb2ljCmtAE0WAIJMAkCQSQAIMgkAQSZduTtH4oUm0Kq6aneOPs/4hSbQmrrmpQxRh6qaQ7PoLQAEbSgABJkEgCCTABBk0jW7c0ytMzSjrs6dw+UCfHaiGoB+/6n57tMgGMRcNACZ3Tk4l1kqD9lVA9DHd+2/MBjEXHQAGZcyZqs3NJMYoJukwjv28uOHy9fvPwXBICbMK3eN/gAAvSmVAOrVndKi0iLjg0FMmFfuGv0BAHpTquiBABAktRpAfCEA9Ka0EkCDJfMOhavfaQPqtMokWjjtTHfagHamCoCmP8bPMmqBn12qBqCX993Xhh9/4KAzUV7iGpj2vF3VAKTNS8QDoLcrAASZBIAgk1YBCE4bb1erAKR/v0rgqwGnjavQOgBddG94cqfDaeOKtBZAmnfMWeoBbSQABJkEgCCTABBkEgCCTFoJoLEFeH4FCXSFWueLxBGnjf4EdD/Xqo2XMkofhfaunQAEXasAEGQSAIJMAkCQSRu7c9gKD22vNd05LhfptAFduVb6Hgh6syrc5DkAgiCVABBkEgCCTAJAkEkACDIJAEEmASDIJAAEmQSAIJMAEGQSAIJMAkCQSQAIMgkAQSYBIMgkAASZBIAgkwAQZBIAgkwCQJBJAAgyCQBBJgEgyCQABJkEgCCTABBkEgCCTAJAkEkACDIJAEEmASDIJAAEmQSAIJMAEGQSAIJMAkCQSQAIMgkAQSYBIMgkAASZBIAgkwAQZBIAgkwCQJBJAAgyCQBBJgEgyCQABJkEgCCTABBkEgCCTAJAkEkACDIJAEEmASDIJAAEmQSAIJMAEGTS/wN3gGBUYed1EQAAAABJRU5ErkJggg==" style="display: block; margin: auto;" /></p>
<p>I also have similar functions to kernel density for bisquare weights,
<code>bisq_xy</code>, and for inverse distance weighting,
<code>idw_xy</code>. And for these you can pass in weights the same as
for the counts I showed above. I don’t have any demographic data here,
but for egohoods you may have census data at centroids, such as the
total number households in poverty, and use that as a weight (or a mean
estimate).</p>
<p>One function that is slightly different than others is the distance
between two point sets. So here is the distance to the nearest NYC
outdoor cafe (note that this data source has no outdoor cafes in Staten
Island):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>dist_cafe <span class="ot">&lt;-</span> <span class="fu">dist_xy</span>(hex_grid,nyc_cafe)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(hex_grid,<span class="at">zcol=</span><span class="st">&#39;dist_cafe&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Unlike the other functions, you can pass in two point sets here,
under the hood it just grabs the X/Y coordinates for each set. So here
is the closest shooting to a cafe.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dist_shoot <span class="ot">&lt;-</span> <span class="fu">dist_xy</span>(nyc_cafe,nyc_shoot,<span class="at">fxy=</span><span class="fu">c</span>(<span class="st">&#39;X_COORD_CD&#39;</span>,<span class="st">&#39;Y_COORD_CD&#39;</span>))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dist_shoot)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   33.23  272.49  495.54  597.37  835.83 5765.32</span></span></code></pre></div>
<p>Not shown, but if the base polygons/features do not have X/Y
coordinates. You can do something like
<code>coords &lt;- coordinates(base); base$x &lt;- coords[,1]</code> and
ditto the second column for y (assuming <code>base</code> is a sp class
object). This function does not have a weight function, as that does not
make sense.</p>
<p>The final feature engineering point to note is the
<code>dcount_xy</code> function. Unlike the other functions that operate
on the centroids of the polygons (or whatever X/Y coordinates you pass
in), this counts the number of points within a specified distance to the
polygon border. This buffers the feature dataset and then calculates the
overlap, so with very large features can take a bit (whereas kernel
density calc timing is mostly a function of how many base polygons you
have):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>dcnt_cafe1mile <span class="ot">&lt;-</span> <span class="fu">dcount_xy</span>(hex_grid,nyc_cafe,<span class="dv">5280</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in RGEOSBinPredFunc(spgeom1, spgeom2, byid, func): spgeom1 and spgeom2</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; have different proj4 strings</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_grid<span class="sc">$</span>dist_cafe,hex_grid<span class="sc">$</span>dcnt_cafe1mile,<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10000</span>))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v=</span><span class="dv">5280</span>) <span class="co"># not perfect, because of difference between polygon distance vs centroid distance</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Again you can use a weight function in the <code>dcount_xy</code>
function. So if you wanted to say count the number of children attending
school in 1 kilometer of your base polygons, this would be the function
you use.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
