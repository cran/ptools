<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Andrew Wheeler" />

<meta name="date" content="2022-07-15" />

<title>Spatial Feature Engineering with ptools</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Spatial Feature Engineering with ptools</h1>
<h4 class="author">Andrew Wheeler</h4>
<h4 class="date">2022-07-15</h4>



<p>This vignette goes over the different functions the <code>ptools</code> package has to generate spatial features common to criminological stype spatial covariate analysis. These include creating spatial units of analysis (grid cells, hexagons). And calculating different spatial feature engineering, such as the distance to nearest and kernel density estimates for covariate values.</p>
<div id="creating-spatial-units-of-analysis" class="section level2">
<h2>Creating Spatial Units of Analysis</h2>
<p>I will start off with an example loading in the data that is included in the package, and I load the <code>sp</code> library to use its simple plotting functions.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(ptools)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(sp)     <span class="co">#for plotting functions</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(raster) <span class="co">#for buffer later on</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="kw">plot</span>(nyc_bor)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="kw">plot</span>(nyc_shoot,<span class="dt">pch=</span><span class="st">&#39;.&#39;</span>,<span class="dt">add=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>We can create a set of vector grid cells over the study area. The projection is in feet, so here I make half-square mile grid cells over the NYC borough outline.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>hm_grid &lt;-<span class="st"> </span><span class="kw">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">plot</span>(nyc_bor)</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="kw">plot</span>(hm_grid,<span class="dt">col=</span><span class="st">&#39;grey&#39;</span>,<span class="dt">border=</span><span class="st">&#39;white&#39;</span>,<span class="dt">add=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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P/dv7bjrr3603Pms619EQHff9rjrr3603FlAJ7nmAf75tsddf/Wj5c4COsk1D/DPtz3u+qsfLXcW0EmueYB/vu1x11/9aLmzgPgmdQO6ZgI8eV1HXH/b+qn7X0RAi297xPW3rZ+6/0UEtPi2R1x/2/qp+19EQItve8T1t62fuv9FBLT4tkdcf9v6qftfRECLb3vE9bet/89p/7OXi9QNiBbqBnTNBNh0iqsm4KnXv4iANpxCQOsEtOEUAlonoA2nENA6AW04hYDW1Q2IFuoGdOobvvrRplNcNYHWtgzOP5yANpxCQOsEtOEUAlonoA2nENA6AW04hYDW1Q2IFuoGdOobvvrSP5kAJ+1/8/Pz83ixZhPmHQENDejJxQR0EQEJKCIgAUUEJKCIgATE5ysY0EkTZnV9zzH2Xf/oJQ+drwgBvTyGgN4R0MtjCOgdAb08hoDeEdDLYwjonYIB0UnBgMZNoOfO/gqOnK8vAZ3+HQhosssDKnD+vgRU4vx9CajE+fsSUInz91UwIDopEtA5E2b2G77tfJ9FQGPuQkDXElBXAhpzFwK6loC6KhIQXc0O6KQJs/rR9Tczcf8ZBHT2zQjoUgJqTkBn34yALiWg5mYHRHPzAjpnwqyvz76lLyGgUbf0JQQ06pa+hIBG3dKXENCoW/oSAhp1S1/Cr/FEZgc0YAJxJQERERARAREREJHZAdHc7IDSCXR/mZn38bUERERARAREREBEBERkdkA01/df56AEAREREBEBEREQEb+FEWk1gahHQEQERERARARExG9hROpOIFoQEBEBEREQEQERERARv8YTKTiB6ERARAREREBEBETEb2FEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQEROQ/vbh2PWITYa0AAAAASUVORK5CYII=" style="display: block; margin: auto;" /></p>
<p>I have provided two arguments to the functions to limit the vector areas returned. One is sometimes we only want areas that have at least one observation for certain analyses (so at least one shooting over the 15+ year period in the current sample).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>lim_grid &lt;-<span class="st"> </span><span class="kw">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="op">/</span><span class="dv">2</span>,<span class="dt">point_over=</span>nyc_shoot)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="kw">plot</span>(nyc_bor)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="kw">plot</span>(lim_grid,<span class="dt">col=</span><span class="st">&#39;grey&#39;</span>,<span class="dt">border=</span><span class="st">&#39;white&#39;</span>,<span class="dt">add=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>So you can see it is not as filled in for Staten Island. Note that there is an additional argument, <code>point_n</code>, if you wanted to limit grid cells even more, so at least 2, 3, etc. points are in a grid cell.</p>
<p>A second way we can limit the grid cells are to not have dongle grid cells – cells that only cover a small portion of the city. Here I only include grid cells that have over 30% of their area inside of the border of the city. Note though that this will cause <em>some</em> areas inside the jurisdiction to not be covered. But you can pretty clearly see the reduced number of areas compared to the original grid cells.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>lim_grid2 &lt;-<span class="st"> </span><span class="kw">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="op">/</span><span class="dv">2</span>,<span class="dt">clip_level =</span> <span class="fl">0.3</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="kw">plot</span>(nyc_bor)</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw">plot</span>(lim_grid2,<span class="dt">col=</span><span class="st">&#39;grey&#39;</span>,<span class="dt">border=</span><span class="st">&#39;white&#39;</span>,<span class="dt">add=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co"># See how many fewer than original</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw">print</span>(<span class="kw">nrow</span>(hm_grid))   <span class="co">#original</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; [1] 1493</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw">print</span>(<span class="kw">nrow</span>(lim_grid2)) <span class="co">#no dongles less than 30%</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; [1] 1290</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="kw">print</span>(<span class="kw">nrow</span>(lim_grid))  <span class="co">#only overlap 1 shooting</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt; [1] 865</span></span></code></pre></div>
<p>I also have a similar function, <code>prep_hexgrid</code>, that prepares spatial units of analysis in hexagons instead of square grid cells. One difference is that instead of specifying the size of the cell per length of a side, it specifies it per unit area. So it make it a square mile, use <code>5280^2</code> as the area argument. (Here I make it a half square mile.)</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>hex_grid &lt;-<span class="st"> </span><span class="kw">prep_hexgrid</span>(nyc_bor,(<span class="dv">5280</span><span class="op">/</span><span class="dv">2</span>)<span class="op">^</span><span class="dv">2</span>,<span class="dt">clip_level =</span> <span class="fl">0.3</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#&gt; Loading required namespace: rgeos</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#&gt; Warning in proj4string(obj): CRS object has comment, which is lost in output</span></span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="kw">plot</span>(hex_grid,<span class="dt">col=</span><span class="st">&#39;lightblue&#39;</span>,<span class="dt">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="kw">plot</span>(nyc_bor,<span class="dt">lwd=</span><span class="dv">2</span>,<span class="dt">add=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>The <code>prep_hexgrid</code> function also has the same <code>point_over</code> and <code>point_n</code> arguments as does the <code>prep_grid</code> function. Here I limit to areas with more than 4 shootings.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>hex_lim &lt;-<span class="st"> </span><span class="kw">prep_hexgrid</span>(nyc_bor,(<span class="dv">5280</span><span class="op">/</span><span class="dv">2</span>)<span class="op">^</span><span class="dv">2</span>,<span class="dt">point_over=</span>nyc_shoot,<span class="dt">point_n=</span><span class="dv">4</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co">#&gt; Warning in proj4string(obj): CRS object has comment, which is lost in output</span></span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="kw">plot</span>(hex_lim,<span class="dt">col=</span><span class="st">&#39;lightblue&#39;</span>,<span class="dt">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="kw">plot</span>(nyc_bor,<span class="dt">lwd=</span><span class="dv">2</span>,<span class="dt">add=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Note that the way I wrote these functions, the <code>clip_level</code> for hexagons can be somewhat slow. Doing <code>point_over</code> though should be reasonably fast. <code>prep_grid</code> converts from raster to vector, so if you have <em>very tiny</em> cells, you may consider just keeping the original raster format for analysis. The conversion to vector will always creep up your memory usage and computation time.</p>
<p>Finally, I have a function that if you have a set of origin points, you can create voronoi polygons within an outline area. Sometimes if working with line or address based features it is simpler to convert to polygons and do subsequent geospatial operations. But note this can take a bit of time as well for any really dense point set (same as really tiny grid cells or hexagons).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Make a smaller sample of the liquor stores in NYC</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>liq_samp &lt;-<span class="st"> </span>nyc_liq[<span class="kw">sample</span>(<span class="kw">rownames</span>(nyc_liq<span class="op">@</span>data),<span class="dv">20</span>),]</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co"># Buffer, it is hard to view all the little islands</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>nyc_buff &lt;-<span class="st"> </span><span class="kw">buffer</span>(nyc_bor,<span class="dv">5000</span>)</span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># Now create Voronoi/Thiessen areas</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>liq_vor &lt;-<span class="st"> </span><span class="kw">vor_sp</span>(nyc_buff,liq_samp)</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt; Loading required namespace: maptools</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt; Warning in sp::proj4string(outline): CRS object has comment, which is lost in</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt; output</span></span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co"># Plot to show off</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="kw">plot</span>(liq_vor,<span class="dt">col=</span><span class="st">&#39;tan&#39;</span>,<span class="dt">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="kw">plot</span>(liq_samp,<span class="dt">add=</span><span class="ot">TRUE</span>)</span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="kw">plot</span>(nyc_buff,<span class="dt">border=</span><span class="st">&#39;black&#39;</span>,<span class="dt">lwd=</span><span class="dv">2</span>,<span class="dt">add=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="spatial-feature-engineering" class="section level2">
<h2>Spatial Feature Engineering</h2>
<p>The spatial feature engineering functions are not only for creating vector spatial units, but assigning typical values we may be interested in. So lets reuse our <code>hex_grid</code> over the city, and calculate the number of shootings in each hexgrid:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>hex_grid<span class="op">$</span>shoot_cnt &lt;-<span class="st"> </span><span class="kw">count_xy</span>(hex_grid,nyc_shoot)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw">spplot</span>(hex_grid,<span class="dt">zcol=</span><span class="st">&#39;shoot_cnt&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Remember since <code>hex_grid</code> eliminated some dongles, we may be interested to see if we happened to lose some shootings on the edges of NYC.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">print</span>(<span class="kw">sum</span>(hex_grid<span class="op">$</span>shoot_cnt))</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">#&gt; [1] 26221</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="kw">print</span>(<span class="kw">nrow</span>(nyc_shoot))</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">#&gt; [1] 26274</span></span></code></pre></div>
<p>So we ended up losing 37 shootings using this grid. We can also use weights in these functions. So here, say I wanted to do a pre/post analysis. A simple way to do that is to weight the observations in the original point pattern, and then use that field as a weight.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>covid_date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&#39;03/22/2020&#39;</span>, <span class="dt">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a>nyc_shoot<span class="op">$</span>pre &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">*</span>(nyc_shoot<span class="op">$</span>OCCUR_DATE <span class="op">&lt;</span><span class="st"> </span>covid_date)</span>
<span id="cb11-3"><a href="#cb11-3"></a>nyc_shoot<span class="op">$</span>post &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">*</span>(nyc_shoot<span class="op">$</span>OCCUR_DATE <span class="op">&gt;=</span><span class="st"> </span>covid_date)</span>
<span id="cb11-4"><a href="#cb11-4"></a>hex_grid<span class="op">$</span>shoot_pre &lt;-<span class="st"> </span><span class="kw">count_xy</span>(hex_grid,nyc_shoot,<span class="dt">weight=</span><span class="st">&#39;pre&#39;</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a>hex_grid<span class="op">$</span>shoot_post &lt;-<span class="st"> </span><span class="kw">count_xy</span>(hex_grid,nyc_shoot,<span class="dt">weight=</span><span class="st">&#39;post&#39;</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="kw">plot</span>(hex_grid<span class="op">$</span>shoot_pre,hex_grid<span class="op">$</span>shoot_post)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>So you can see that the pre and post shooting counts are highly correlated and a few maybe outliers.</p>
<p>Sometimes we want other feature engineering RTM or Egohood style, with density of nearby features. So we can calculate the density (assuming a Gaussian kernel), for liquor stores <em>at the centroid</em> of our polygon features. Since the area of our hexgrid is half a square mile, <code>(5280/2)^2</code>, this means that the vertex to vertex diameter of our hexagon cells is <code>hex_dim((5280/2)^2)</code>, not quite 3300 feet (see also the <code>hex_area</code> and <code>hex_wd</code> functions to convert between different hexagon sizes). So there is not much point of doing a KDE bandwidth for under this (will basically be the same as just counting up the total inside of the hexagon. So here I do a bandwidth of 1 mile.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>hex_grid<span class="op">$</span>kliq_1mile &lt;-<span class="st"> </span><span class="kw">kern_xy</span>(hex_grid,nyc_liq,<span class="dv">5280</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="kw">spplot</span>(hex_grid,<span class="dt">zcol=</span><span class="st">&#39;kliq_1mile&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>I also have similar functions to kernel density for bisquare weights, <code>bisq_xy</code>, and for inverse distance weighting, <code>idw_xy</code>. And for these you can pass in weights the same as for the counts I showed above. I don’t have any demographic data here, but for egohoods you may have census data at centroids, such as the total number households in poverty, and use that as a weight (or a mean estimate).</p>
<p>One function that is slightly different than others is the distance between two point sets. So here is the distance to the nearest NYC outdoor cafe (note that this data source has no outdoor cafes in Staten Island):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>hex_grid<span class="op">$</span>dist_cafe &lt;-<span class="st"> </span><span class="kw">dist_xy</span>(hex_grid,nyc_cafe)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">spplot</span>(hex_grid,<span class="dt">zcol=</span><span class="st">&#39;dist_cafe&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAAqFBMVEUAAAAAADMAADoAAGYAAGsAAHQAAKwAAOMAAOwAOjoAOpAAZrYdAP86AAA6ADo6AGY6OgA6OpA6ZmY6kNtQAP9mAABmADpmAGZmOpBmtv97AP+CAP+QOgCQOjqQOmaQ2/+uGea2ZgC2kDq225C2///ZNMvbkDrbtrbb///hOcb/Var/dYr/kW7/lmn/sk3/tmb/zTL/0i3/25D/7hH//2D//7b//9v///+G9OqKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO2dC5/bNnbF6XQqtak27TaTbT3d1uM247q2G7t2HH7/b9YRiYPXxcWDoCRqdM5vZ8FckSAB/o0HcQEMI0V1aLj0A1DXLQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV0iQFSXCBDVJQJEdYkAUV3SABqoF6fCq10ZoGXR3YaGYTeEB9cgC9DvSRGgs2nYPev5X+yAg+sQAdqIJmyO5OxwcOknqhMB2ogIUCrWWjtFgJKx1topApSMtdZOEaBkrLV2CgANgz3AD0MYuivUX84pArQVHcmZ6MHBxAUOhuHuLgDlaLibf7lop58AbUeDrcZkcXQ3yYFiDHeiwDr7QyMkQJeXa/+IBhF4safewXLhJhMB2pAIUBxrrZ2aRIDiWGvt1CQCFMdaa6cmEaA41lo7NU4d8wF9LjMiv8PQ/N0wd7lMPwyGO//UCz01QgJ0YRlETJf9eLADGkAFXXlHk3/qZXryBGgjspVUXDft5C/aqZfIXgK0ERGgVKy1dooAJWOttVMEKBlrrZ0iQMlYa+2UGy61B6DCGu7CA3HqRfw7CNAWNDtrGDbcf+zg15H89c6d5rmCHCPb78+HEAHagDJlTFwKyVNxhi2w9pPOhRAB2oD0Vk6xHXQnRz32hqAzPTtCAnQ5ESAt1lr7jYsAabHW2m9cLwKgb0kRoHPotAANUbjysyMkQJeS76xx5x9M4+2mixUPwNtTd/YMdMKGuRO2h+fHwYanyH4CdGGFROQQyeGF0MKDrvxweBbCUyBEgC6rzPiEqKT0Ci6qvfbu4DAL4WH1N0CALisClI211n67IkDZWGvttysClI211n67IkDZWGvtt6t4dDQ3XHonTsUvCO1AKvgx4AwWpNUdPgjQpeX7Z5QcNu7wH4GzB/4MOvib8Jn/DEpw9FjT4YMAXV5NLmNhoeOVPvuw9Blc6WMN8RmrPDxCAnQ5NTitxs0evf3jmj2iYRQPdnQ9O0ICdDkRIC3WWvuN60YA+jztffDz+Mdfh7/5dUwHUaza3ahANwLQUZ+fKXn7D8f/pYMoVu1ulK8bakR//+X1+P0vb8av//hrMohj1e5GObV046Oe+27ujyPcJ7vxgcH/W+nxEVYB9O7H9xMnz7wkgzhW7W4U1PIhURQ6okiRHxJVw2oJQKgAFGz69MdfX48EaFW1DGWUmz2xQf/lMl+ip0qKAK2p2wLo3bGZTIDW1G0B9Pbn5/9jI3pN3RRAUxNI6b+zG79MNwWQqaO+/zJ9M0wGUaza3ahZwoc+5VSPZTTtEpyKD/00EcM3BL8Yw84Y1ksCwpoqrDnWWvuNSk6zEAZzsLOhPotHMCPxwiVrpgEhATq7ytVX2Qlxp1dSwmAvWTURCAnQ2UWAirHW2m9TBKgYa639NvWyAPq/pAjQCUWAirHW2m9SCe8NYZBDrTv05XFg6Ei4cwgDLhEP0pMKhATovEp6b2juHIFB+HYoDhv70Nljt/NcQYIHSTDVkA6EBOisypQxanFkDShJhrgUksWRKLDiUkgrlqoTgpAAnVX1zZ4a/1at2bOXp8btIGFoTQhCAnRWEaCqWGvttycCVBVrrf32RICqYq21354IUFWstfZbk+q9kXbniAyeO8d8oLtz2M0wMXg/Wt8Q+yzmh6VJQUiAzqciIjm8AM8OBxEzwntjLlwm3nAwR4an6dqwlwCdXw0jF8IQV0WZoQx7Bm4r7j/GvyxJDEICdDZdCCB5/1USg5AAnU0EqDrWWvttiQBVx1prvy0RoOpYa+03pZrhUoRd7hw4Q73/Gq+DAJ1Zin+GCz3DXezOsUuuzhF4cAjvjcz971ZAiACdVcUiRWyT6p26E6eqhY49VTyAKOx6U4SQAJ1D5UaNM5RP1Zs95faPjb03RQgJ0DlEgNpirbXfjAhQW6y19psRAWqLtdZ+Kyr3y9mIDmKttd+GytMsoo66/dWdldoaQ/Tcg1MTD8Fu/FUq891QFByiOBIG+92wfG38HPyQeJ3KDFSIpkvZsI/aPZlTtQfhUMZ1iQC1x1prvwm9cIB+S4oArScC1B5rrf0mRIDaY62134Dqplns/AOxJKKYiLHPXGv97xPPMt92nXQhJEAnlWVmiCHSEEnQZA3m82HmWotm+mmGdYqfkQCdSfUuhonhCK36qhkGUR9otZQhJECn1OYAWi9lCAnQKUWAlsVaa3/xIkDLYq21v3gRoGWx1tpfuuqnWeR2RbUGxXsj5QqC+58uaQgJ0MnkPChevXpV685h/TOEw4aYhCGuDWZ04P6nShxCAnQiucLm1awadw5bxgiXsdCQcudQC7vTJA9hBUB//PW4bTz3jW+Ta4+8AkGiQaS2coTTamxIDGWoza3TJA9hBUBvf3z/9ac33HCuTQQIwn5z3PKySTcOkLfttwGEm+626cYB8k79/ON/DsNrAtQoAgR9fm5Bf/4hTQ4B0uUG4NEJi905sCtqarwdB0lDyp0jt77iKVKHsKYEen/cuJkANcu9xFfqoqy6x09uV1QfnulagWZkWD9tCMsAHSF5BoiN6AXS65ViNVazAVhUe+Vus3rKEJYBGt8+V2F/8yu78QtEgI46fkh8zX3jl4gALYu11v7iRYCWxVprf/EiQMtirbW/dOXcOXBgGEjMfg9DfTGOqt0OV08aQgJ0MkXeG8KdI3Tp8Nw59uESmqldUYU7RxCzuPcJEoeQAJ1INcVCWJKs5c4R3/8kuU+ATq2ahonW/ukayogf4OJDGQtirbW/ZN0KQP+bFAHqFgHqiLXW/pJFgDpirbW/RNmcJUDLY621vzxh+QLhVlG5OsfExjCq7hyjG5qfL/F2RZ0j9Z4lNqyaUIQEaE3hnUlmpDuHD0/gzjHHlHLnwA/mF7EralTarLgYh0wpQgK0oipGLqLaK7MulKy+oh+cYYwPVMN6SUVIgFbUhQC6hAjQKUSACFCXCBAB6tKlARKNIbaBrknJeRcIS72wMVob0+/Tm16Yd6PI4C4JDtS1EtdILEICtJLUeRc134FMDDsPH69PP/Xco5slip+YxJDItZOLkACto3KtlfkSbSNBGNdnMgPT/AR1YRz7uulFSIDW0SoA2chEg6jiAQjQVYsAEaAuESAC1CUCRIB6lJt3cRf/Yg3mDbu+l40s/EX6NYtlNHO7HYrY10gwQgK0gnLzLhL/kVhkc5wRmCdU7MJfjCG4n/vFuzaY3uGmeeznU10oPyEtSDJCAtSvTBmjFEfLlvnF7RquxTdrOaujN80ICVC/KkYuhEG0VGKDPsjRcq0d9dDGRRanGSEB6hcBIkBdIkAEqEsEiAB1iQARoD6p4+1iaN7bA3N6wXahzcjgjabbORvmXpkdVe217hd0vmIP/UPnOyFAqyrt8SNowqnGsBv8MDBYfx6LCO4kELEGe214RmrJ18Oz+nryBGhl1QxlVJ/q/Dui2itXfamVo6jGDkY9r4UAraybBehjUgSoVQSIAHWJABGgLhEgAtSjKncOnHoXnyoMrss+MxAbUkOt9tr4DLlenuFH8xGp2WuVAK2paneOcUz+mjodp1ofDee04TlrzGfEi2z6Z+x2wX6rxp3jiE+E0DDc3xvfEHOQTTJCAtSvRe4c5QILoSh0BlHoiGtF+RSWQntZCj1Tc9Qw2IN8mhESoH4tGcooGmpGPfRrxaliKCNuBxlu7hHeE6CziQARoC4RoDxAX/80DNOmc9z2Oy0ClAfo87whGPcL00SA8gC9/fn4/9yxUFFu+QRlaL5y8B7hjIC3xar13tCvxak7HJhOmPPvmDthBwz8H4a573U/mIOH7FtrAOiPf5/2ROWeqWktIaKZN7srqvDe0K9NLN8JdszBYUBX3tBkip/jwcOzcj35EkDevvHf//JPww9vCFBaS+qkHkOx+lpQjR1sfWarr4dZ+otrKIG+/vRm/P4vvxKgpAhQuQ00jio5BIgA1QLERnRSBKgI0HHL769/fs9ufFIEqFwCvRv0/b5vfdvvRaOjZYMeGWCouBZn2gOMo9oDcGNHVsGPAUis7OElHGFdFVabnY32a5fqjqG5c/SeHvh25K8N3DlClw5zYMhxvh338zeg+eCIj+nKz/8RJR0hAVqsdYqUhgLLFinx/fVTd3Hpsw9LnyEufTx3DlRjtjgKEo+QAC3WiVo5+i+gIX6AxLXV7R/XDhJDGQ8gKNUgIkD9IkAjAeoRARoJUI8I0EiAOtTUUWcjui5PG+1XrMaO+ord+Ok/xtHNypDX1s/KOIRd+FQ3Hn+Pj8GGrAgJ0CK1lzErfUgUZYy8Nix9cvPCDnHpIz8k4uBxkjeJAyEBWqR1GjXLDa6VI061zZ6o+ZOYmVps/7h20KMhyGYAwg9JEaCCCBBCArRIBAghAVokAoSQAC0SAUJIgBZoaJ93EfxSMuxqIjOdMBgWrJFonerdjAz0xoxTvfkI9NwJG+ZOmO2HEaAOLUEkT0Rg2Plo5CJzMzMsTbsQntwqrWAnmJERTOvBd0QLj9eVJ0DLdeJKylZB9dfGtVbNOtENQxmovh69eowALRcBGglQjwjQSIB6RIBGAtQjAjQSoA4tGi4d6g149y2R4ZJdeJDbsRDjqBXuHBhIBT8EqEM5D4xXr9Zx59g5R43qyMQkDOfFse9355jxmRAyfh0EaJkyxcKrSWdz5xAGFDr6NDBrQKFziEuf+7D0SbhzDF4pNGUIAWqS3g55ZXTiFpL+i2gHiWZP1PxZNJTht4OmDCFATSJABKhLBIgAdYkAEaAuESAC1KfphaWHyE0nzBjGNdw5vPH20rU1SyIijN057mN3joeMO4fpjSE/CFCjck46r6whf2qlOwdCyaowAB58R9QWZd07FyCEATyTOwfg0dw5jsUPAVquinqleGq5KnLDEeVr5VCGqL5ErRXVXrb6EhNSOZSxtgjQSIB6RIBGAtQjAjQSoB4RoJEAdahmhLN0apU7B0IRu7w2vCS3GMchPBjigVRv/BT8GHDozrGKanwsSqcmDDt4cAiXDLsgh7IYh+bOoaypKdbVvPddOaIFOR5CVw7jzjEnDokkQE3SCx299BGnCoModOQKG2pxdBdGUl7VV/iQ3WeWBIpKH+8DIsL/SYoAKapow0Rn1rR/RLNHN+iRLWgHFds/rtkTjWAQoIUiQEgeQgLUJAKE5CEkQE0iQEgeQgLUpOpGdJNPNF75FTSibUYgJEBtquvG534Net5Kzz3qxltD/ptAeVZGvhufWFcTkzBGdZFNAtSqmg+JevlkDYVCZ5cw6JGpRZn9kBiWQqkPibbQCb8fugVdgrfYBtC0pxz3jTdS2zItLobFZk/DLt+iHdSwuFTZCfEx+fbaAHp7hIQbzhkRoLERoM9/b7ZG5ZaXRxGgsQyQt+33+Md//NczI9x0FyJAY1sJ9O7nrwTIEwEamwD6/q/vCZBTzqkev4yxQfeDd67z5sBzjBcGPbL5QFzrOdWbTljsVH/vnOrNFyDnVB99+gmzAWEZoLevRwJkpTHjvdXptLqZOH54N8ipOcKgR3YnrwU79gDs2AN8R5TrapqevIJPC0Dff5maQ6/ZiD6qohqJzlzijbidoQw9IxDW9MJmRtiNHwmQywiE9QBx3/iRALmMQFgFUHX2NtqvTwQIyUNIgJpEgJA8hASoRTXDpThTP1U3mFe/IXcONScQEqB6ZWdWWFcOnFl050gaTufOoayrWXTnUPICIQGqVcaLwpYCOFUvn8qGXVz67MLSZ5k7BwqdQ1j6NLhzRLmBkADVqtyW0ds/C9pBKw9laO2f87hzVOdxo/2qRICC3EBIgGpFgILcQEiAakWAgtxASIBqRYCC3EBIgKoVe1GkltE05zkDwqHWcCp3DtMJk9ukau4cwQ6XMjMQPiZFgJLy35kwWKySrzntgSEMeP+ncOdQtklNu3OY2WBldw4C1CRbawhDsZK6qqGMIgcEaJkIENKNkAA1iQAh3QgJUJMIENKNkAA1iQAh3QgJUJPM+1qwjOZ1uXMYDCrcOQhQm3ynjYZlNFdy59jtomutQZxaXmQz784Rrqkp8wEhAWrVomU0S+VTlTuHLWMKBVbVMr8odHrdOQjQYi1q5ZQNevtHtIO0MxraP91DGQRosQjQSIB6RIBGAtQjAjQSoAaJRBCgkQBVaxrmDg1N4+1DrSHhkhEZduGpYvB+N3j7paITpm+TGozE053jRMKbcYZGRJa6c8zvXyJyFxs8mnx4JncOHx6xTWrgC0R3jtPI1Q0wtFdSi4YyUAPJSko17KPqq7xFWGaXbz1HEBKgGhEgkSMICVCNCJDIEYQEqEYESOQIQgJUIwIkcgQhAaqRG6U0/23fvR3YHAqGZe4choGajRDstbjGXhsOpIptUr2BVPBjsKA7x2ry/CScF0eDw0aVO0feJQOGnTvNO92dsfevi/ZWSWyTeu8W40hsk0p3jtUknLo6N1sRBlGkhCXJXi2ORKGT21vlPix9xCbNYocnunOsJdfa0NoyXUMZspUTtWX2aoNInNHQ/invMcehjJVEgILcQEiAakWAgtxASIBqRYCC3EBIgGrFRnSQGwj/LSkClJK/0OVK3XhEuEv2y8XMikSfPvVrOBEj6MKLiRgPnd14AtSijjIm991wVyhScmWMLJ/C0kdMAxMTMR66PiQSoCZ1tHJqRi60Rk2mlaMbouaP7oT40DOUQYCaRICQEQgJUJMIEDICYQVAn4fhhzfc9nsSAUJGICwD9PWnN+PnZ0q4X9hIgFxGIKyrwr7/5Q13LJw0vf0F8y7yPvQ7/yDYpXIOD6EhcJnfK6cqSyKKiRgP/owMdMIG8ymo7FSvAORv+/2sdz++556psxbOu9DwSkzNEYiYXrg3zSI+Q54KePAdUZ+IMcQQWXgy3xHbSqCvf/rhDTfdtVp3KENUY6JOslVQda11qK++uocy6qqw5zYQAYII0LikDUSAIAI0shHdIwI0NgF07MJ//fN7duMhAjS2lUDvBn2/71vb9nsc9XU1l7lzGGwSmwwiBAPayKoYPz1kVrQDP3JFO2vAQCr4oTvHmlL3Ll3uzpGYiKG5ZOwxzQK/CIM9NVhTMzMRI3LneHSuHHTnOIEip7K13TmUIkXM7UqVMcqpYhqYKHS80ucxLH3ozrG67Ltub/Y0tH8ywxF6K0c13EftH9Hs0ds/HI1fWwQIGYGQADWJACEjEBKgJhEgZARCAtQkAoSMQEiAGuQPns8ILHHnsNeKXVHF8LpwyfCG1xXDvfPesAbTCbNeHNJ7AyE6YcMcPi1251iYwY3261K8kekydw57bRhZtDZmep/cJE2BwXTU4b1hDc4X6MGHx/Pe8NbVxMHTUWu4c9RncaP9qiT9BisqqXKtFdVeFdVXecDiXo5caNWXrLWs4cmIX6LXEQEKcgMhAaoVAQpyAyEBqhUBCnIDIQGqFQEKcgPhfVIvHSB9kDBziVwUw0DR4s5hrxWRYfwU/LQMl+IAr096byAEN5r3hmcAPwQo1uzn0HjJLlw/wxga3TmE94bz4ohX2Ei6ZBywSGbScHzM+9Bzw/PecF4cuveGZziSo/fibxog+++14ZJdXGBYgyhjFENuMY59WPpUrcwrDOZJi94bqV1Rw9CWPjXuHLcL0GEBQPpG7jVDGdXtn/JwRKKVg0cVZ4hmjzUU2z8VQxkEqOoSAhTnSHw7ApS9hADFORLfjgBlLyFAcY7Et9s0QF4LsfYMe2bCYFum9ffFq958I3pctxGtZw3CKwBo7lLOYTpNc5d0Dh/QnZ3OxIHtubu+8fSm8vfdma0xkj1va8h34w1k2e0txESM4vYWfsp8fMYx/EVbRtMtpel14Y+5+zhPxECe65mDcPMAuX8N6octOcvA/uPDgfjkZv/R6/eNywndcBeXPqLQKX03zM3tEoVOVKbKotT9Ir4bPoSlj/huKItwJXsQbh8g+0Vd/bQuK3ckw6YnalMcXLNDva/e7NHaQT0jF5nZpfdRalrabsX2T0OzJ4wZIQHS7kuAsjEjJEDafQlQNmaEBEi7LwHKxoxwswDZJ1QBsrESIC2fbxegYfgwIBxMJwxO3k/mFzPpJLFGpFhOUrife67r+iNMb1r6wbu1Me0BOl+xU71YAXFvw2idw2htzGCaxfxKhtEkRn/gB4Wg47Vz+JhYRtN0wobCl58oYoTbBGj48Kxjsj/MB08WIiTTJHtMrBEJeO5x4L+Q6QDvzhyoT2HQCGbi+GToUzTEvAu7fGZ+Gc2Ic7c2pvlHkyt+DCpxGh5wLeZdyGU0Hwf/n2bdG0K4SYBmbp7J+YADUY2h4BVldFzg69VXuRrLLAst6qTiGZkNwEStZQ3x+yjwc8wANfNlrbWw+vJjJUDXBVAmzzSA3BkEiABl8owAeecTIAJUY1fjIUAEqMaunW7AGSxIbqQPByblCV8FkwI3BmnehRulNK/NHegPYmCQw6WAwo2OxmdI7w3cbh8e5OZdIA0VeWYzQD3F5hkOwE/Ze0NGhnB7AB2x8f8+YIaAceeY8fG8EYSvQuD4IGY3BHMfSvhk5l3shH+G895I/eo8N8QkDOHBcfCnWVTi42WAepaYd/FY6b0h40K4NYDi0mdIuHOIf0BhKeS7c4h/2qIU0B9EFCnlMkY1DHEpJN05REGJ56jIM5EB6pmi0Km/TRgTws0B9CFq/ySGMkQVHrWD3FCGaFzEzY/Mh2jRqKlo5ZQN1e2gBo/bxIpR6qkdzZ4wIoQESHsQApS9J0ICpD0IAcreEyEB0h6EAGXvifCQFAHaDkDlcTAdIHHtywfIdMOObhwIY3cO54mATljGnWNKje/OMb2tojtHedXMwJ1j5x94hoTnx3zbXezOsRfLaOJBTHWQctZwTzun23PWmM3W48UZTJ6Nbd4b8pYIKwD6+qdheH3Gbb99ePAd0blz+PBM7iw+PCl3DrGeqVgLNfEIdzE8wiCYGYQBnEWn7mEQG+d6nONB5jRYRPQ8E84ansdLaHiEf8fi4mdsAuj7L6/Hzz+8Oed+YfpQhi2Bo9pr3aGMBdVXZmyjoT6Ls1/OLtXzTFTsqmHpawluh7AM0Ocf3z8XNK/PuWMhAcKDnBSgHjW2gZ5LoXPumUqA8CBXC9Ase/qZ940nQHiQqwUoPPvdcdtUAkSAvNshrAHo3XMT+pwA5dw5TB7Y8CTuHJnJ7gjBgBwutQb1VGvA/cGPG/PFgyANNnl6ntkcEVkUG+wlba8lvB/CCoDeTR31szWiS+4czpVjJXeO3S4xl+Eu9t4IDIGPRvAfzqVD9/zwVucIHiZ4TDyIXWakhE/krAGjzTOE9pKez0AtAH39aS5hztONP7s7B0oD8Ry6O4dS6OwyBZYsn8IHqXDnqCl9bI7gh6cw81wcC3zIwnsiLAP0dmpPvz7Ttt9nH8rAyxcPoreDtGZPZrky0Q6KH6RrLCxu5dhmjsi8GKCXN5RBgAhQvT11KgEiQNX21KkEiABV21OnEqDqd2Bf4hoADVFYe++tAXR+d47pfQ4JgjR3DmUAfpff8tI/tcGdI5dRD2ZU3a6wMSJHnkKCxNobx2ydDR8wNO+thlL1mhBuDqDx/O4ceKvyQRJERMwI7w3FfSi/x66hWbpzZHLJfFgEM87jJ2DFW9HkycPH5KrJXrEaSsVLQrhBgM4/lKFVY4mZqVr1VR79aNnluyKLkF691lINcSvhg8zv8v0REiACRIAIEAEKzydAxSwiQLl4CJCSce4XAqTHsm4vrLxGouvKp78GHbsnMwKyJ9XTC9vJbwp4QtOlil6Ev0Zi3AvDGVEvbLKF3bIPQ5y9yO+PMHwsf0RAuDmAVv4OFHflzYH3zubQvlXxOHcDQvktJyKi6TvQfCC+KbjvQOZRvWeZE2OfzPsOBJvJkacYvKj4CbIXBx+fNRnmg8JrQrg1gNb9El2sxtyXYFuvaA9fdkJs+RJdrMYOsj5DYsSTWUNcn8lE6LXWx1kIC4UQAaoGyD7Z5gCSj6gCpGcvASJA7hEJEAG6NoD+LikClHgyAuRHhHBzAK3rE40D8y4SOxYixAvV8976MyOMDG0+0TjA/e0BuLGPah8AiREP5vrwyBEYxvDAm+disxcHBht3kH9PCLcG0Ni+yGY4M8Mc2FkZ+LPTHfC3D2dFmKkS+Sebz8CCmfvaWRl3zpqY0RFMEdnHK24G90/iM38P8pfQxC/m68+cky5nveyde+7TAf7MQektIdweQLIUyi7zG5dCQ1gK3celkD5FYyjmmvcveR+WXLl5YaI42sWniuJQlD7R/T2LLXVtjuAXm2eFQuejK3Q+VpU+U+wItwhQy0LjxXaQ22ZLNC5EO6jhCe21WoMoMZShNojEg9R3Zlx64+aPzbNis+djY/tnih0hASJABIgAEaDwfAJEgGrsajwESAFIbUQTIO9s41YQ+BuYT0FuaH7uctgJCZ47h+mEOXcOhOiEpadoNO4Vsce1EwJyjUTpzpFZX3EfPog3RSPKGfkVER4IiRUQbZ75uekNwI8D+lyDH9Z0wjYMELwJRHK9TXdNT354RJ4BHnxQjN05AJG3GSk+KNp31prWeFZHQIRgJvIWErxFu/B6UzS8WyrfEe2uqGINVptnwsMKs3g+DvYgMBSTj3BrALlSVKvG3CS5YvVVrsYOC6ov+6hxNdbgnliuxjKrTanZ63JEVPkiN8W1saGQeIQE6PoBck/UDtBSESAC1CUCRIC6RIAIUJe2CpDnTWAS6g6QF9GAapU7hzUc0JfHgXlb7SkeEq4gCIGJc+cQhviSaGR3X3bncCO79sDmSJhVTxShbzoAAAhdSURBVInh6eb0RqlHuCmAPG+CwJ3DuXQ8Od+ORneOxKqb1q9jET574Qri/90Jdw7/b4rA9w0xMSZX3PSICSdlGC+OB+HO8fgIVw6TZ2Pg0tGPz0YBct4E4t8L/iH1uHNYA/5pa04TNY+6DwuMJncOxDGE4Zhw54ie0CuORKkrcgSXDPHt+vHZOEB6+6drKMMaRDtoQUrjJkvLUEYxVt2t1Z0q0itypD1VDSJABKhLBIgAdYkAEaAuEaDrBChuRBMg76ThI7wJFrhzuBF5e2D6XG5oHr0xDHNjaL49nWaFj9ADw3TCnH+H6XvFQ/O5iM03Kftk4RMGG6gimaYTJne4PKm2B9AAdpa4c8yh584xh/ehc1CwXMd809jjpi6Z81uVHhhiAZeEO0chaviV4Mn8J4Q7R2JJm/nUR1x74uJn3CBA0imuYSgjqsYe1PrMVWMNjyYeFfVKXI0l3BNFNVaOPT6QQxkimeq1pxMBWq7TApS5bxGgM4oALRcBGj2AdklFjzTtKXfafeMJUPm+VwvQ91+OkJx2wzkCVL7vtQL0bvhnszXqCbe8lItDYBy1wp0DITJUG1n1/DuWZtxoAcptf4hslO4c9XeRQ602EXEyOxKzVCWAZs3n/Pe05fepN92NFodwLh3eWhJPvjuHQSjcRPXB+XVE/xH4d3Tl3Wh9LOAKYjwwxsBHwxxY741GfOZbeLcKfFKcK8dF8FnSBjr9rs2J1SJQe2mLBXnOCwiln0NYCnXjMz9qdKA7TSRcMSqiRyFnCzs8e5SIC+GzTYC8oYyoHaQvV1ZuByWWIG/PrjNLDmXYZ99KIgjQlvUiATrDvvEEyOhFAnSGfeMJkNHLBOjk+8ZfUSN6FWWWwqxuRF9MbQC1xlprD84ZPn2KuvEGIXXFTdOvD7vyZopGok9vesDLkra6/E8A0TeBgz8jI+jGm69BG0jE5gB6xueoIV7wUawR+SEx6SkshfTiaJ0JCWsoscAnDg5x6WMvQbiFRGwVoE/ldlCNe6LWINpC1k+SHo3WoHojbkoE6LIiQNlYa+3+KQSIABGgahGgbKxl+xD/ciMA2XQToFysJfsw/Db44bEPP8ydsE9wqv/ovOxNJ0xO0UBvbDB9r+HRP0jsqLosWasJLvPCId8zjFi9UW55uSVdEqBnbJ51zCGEFh7Tlf8YQKRP0fDm+XjMRDS5uQvLErWeLCL7GB5rmPNH23R3Q7ogQBM2EzoIP6H6+hTVY10zDe3BZqovUVsJA84c44PNiQCdX/UAXYEI0PlFgKpjzdoJEAEqxZq1EyACVIo1Zx8GA44L7UAq+JE76GEcNZqikVvzDvxccu5CIDmJQxgu/Yj1uhRAw/Dly5cjOv7fb7Mrh0EIfh3RNI3EFI3EqptPoX/H44XnLoSKltHE3+hmdVyPLgTQEZ8vBiG/FPrNlUJDXArp3mWovXT/jthl69JKeG/gh608YqUuDNCXIWoH2YZQuR2U8W8VDaJlyTihrrnZE4gAXUYvD6C/TYoAnUgEqCpW1U6ACFBNrKqdABGgmlgV+3MffjCdsC9mJN4QdDwwn4Lc0Lz5FOT8O9AJs0Pzps8F/44RBrvg5PbkltG8ti8/oS4B0AB2zMFvFiJzYN054BzkLdtqevLxBrJPzr9jusXwFC04uTl5y2hebfEzXgQg+w2oWI3Zeqxiqqo1xI+w3ZdzBY9Y1osFiDqPCBDVJQJEdYkAUV26HEDDYA8wjmoPwE00oKpPlPcMy56YWqiLdOOHL1+MOwf+rDsH/j45v47kch3BbqqRf8eyZ6YW6TJfogfnzhGWQrp3mViuI7WjKkuhs+viQxlRO0j3bxXtoIR/K9tBZxcBorpEgKguESCqSxcGiI3oa9eFABqjbrxBSJ2iYfr1ySkax8g+uAPic1ZdCqBp/kFcCulTNOyXRfshEQc2Mhwse2JqoS4HUEU7qMY9cdkDUmuJAFFdIkBUlwgQ1SUCRHXpYgB5TvVfnJe96YTJKRrojRmn+hFTNJY9H7WaWgAKt/auiVW3u2k9fqhP0fDm+XyEUwiLnw2oBaBwT7CaWFW7rL6+RPVYphor3YU6oxoAinYlrIlVta8CELUBWYBeJeVv+x3ti1oTq2onQC9FJYC8UwkQJUWAqC5dBqCET7Q1YBw1mqLh+XcsTSt1AjUAtFojehi+fTPuHPNBNE0jMUXDbBdKfDanBoDW6sY/U3PUMNgDFD66dxmuJz5bUwtA4dbeNbEm7Yabbwi/qe0g59+6OH3UidUCUHusSTsBekkiQFSXCBDVJQJEdensAD33vYa57/VtsAfmUxD8O0a4c9jNMKmt6swAOWa++QfBsq3zib8N9mDZM1Bn0ZkB+iaqr6ga+zLEUZCfTWuzAFHXIQJEdYkAUV0iQFSXzt0L+4beV3jguXMsuyN1IZ37O9DswfH77xM5838c/0Ys17HsftTFdP4v0Ud8jvLcOcyPxOcKdYmhjN8NQbYdtOwm1BZEgKguESCqSwSI6hIBorp0AYBmgoZhxND8sntQm9AlADr25O0EH+Jz3Tq7PxD1wlR4tesCRFFVIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHWJAFFdIkBUlwgQ1SUCRHXp/wFmZgfJP9c8dwAAAABJRU5ErkJggg==" style="display: block; margin: auto;" /></p>
<p>Unlike the other functions, you can pass in two point sets here, under the hood it just grabs the X/Y coordinates for each set. So here is the closest shooting to a cafe.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>dist_shoot &lt;-<span class="st"> </span><span class="kw">dist_xy</span>(nyc_cafe,nyc_shoot,<span class="dt">fxy=</span><span class="kw">c</span>(<span class="st">&#39;X_COORD_CD&#39;</span>,<span class="st">&#39;Y_COORD_CD&#39;</span>))</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">summary</span>(dist_shoot)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co">#&gt;   33.23  283.35  517.18  612.67  844.48 5765.32</span></span></code></pre></div>
<p>Not shown, but if the base polygons/features do not have X/Y coordinates. You can do something like <code>coords &lt;- coordinates(base); base$x &lt;- coords[,1]</code> and ditto the second column for y (assuming <code>base</code> is a sp class object). This function does not have a weight function, as that does not make sense.</p>
<p>The final feature engineering point to note is the <code>dcount_xy</code> function. Unlike the other functions that operate on the centroids of the polygons (or whatever X/Y coordinates you pass in), this counts the number of points within a specified distance to the polygon border. This buffers the feature dataset and then calculates the overlap, so with very large features can take a bit (whereas kernel density calc timing is mostly a function of how many base polygons you have):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>hex_grid<span class="op">$</span>dcnt_cafe1mile &lt;-<span class="st"> </span><span class="kw">dcount_xy</span>(hex_grid,nyc_cafe,<span class="dv">5280</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">#&gt; Warning in RGEOSBinPredFunc(spgeom1, spgeom2, byid, func): spgeom1 and spgeom2</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">#&gt; have different proj4 strings</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="kw">plot</span>(hex_grid<span class="op">$</span>dist_cafe,hex_grid<span class="op">$</span>dcnt_cafe1mile,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10000</span>))</span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="kw">abline</span>(<span class="dt">v=</span><span class="dv">5280</span>) <span class="co"># not perfect, because of difference between polygon distance vs centroid distance</span></span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAAdVBMVEUAAAAAADoAAGYAOjoAOpAAZrY6AAA6ADo6AGY6kNtmAABmADpmOpBmZmZmkJBmtttmtv+QOgCQOjqQOmaQZgCQkGaQ2/+2ZgC2tma225C2/7a2///bkDrb25Db2//b/7bb/9vb////tmb/25D//7b//9v///8fHKqwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO2dDWPkKHKGmYk9d/ZtEvuSm052OrlMj93//yem9cGnBAIKUMG8z+562y1UQOt1VYHUIO4AEBBnNwD0DQQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIAEBARIQECABAQESEBAgAQEBEhAQIBEYQEJMAhnCaisOf6M2mEIqBGjdhgCasSoHYaAGjFqhyGgRozaYQioEaN2GAJqxKgdhoAaMWqHIaBGjNphCKgRo3YYAmrEqB3mJyDv7ZWE+y4M6bntIdgJSPgOeg/0QcdND8JNQMJ31HugE/pteRgIqBH9tjwMBNSIflsehpuAkAN1BjsBYRTWF/wENCijdhgCasSoHa4koM/35Ynrrz+KmFvP6TmGddz0IHUEdBUvy4ubfEEyp0/p9zL02/IwVQT0+a5kc336STZnntHtdei24QdUEdDH65t8efMEMQhoEOCBGtFtww+olQOtLgg5kKTfloepNAr7eF1GYR7/g1HYMGAeqBGjdhgCasSoHa4koOsj3Mxp0LXYKKxzRu1wpST6y/dHGvR8h4AUo3a44jD+8/2RQkNAK6N2uOpE4uXppyOg9HWJRmHUDtedSLw8wwOtjNrhSjnQKpuPV9/9+FE/Ty+jdrjaKGwJYp/vENDCqB3GPFAjRu0wBNSIUTsM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" style="display: block; margin: auto;" /></p>
<p>Again you can use a weight function in the <code>dcount_xy</code> function. So if you wanted to say count the number of children attending school in 1 kilometer of your base polygons, this would be the function you use.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
