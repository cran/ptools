<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Andrew Wheeler" />

<meta name="date" content="2023-02-07" />

<title>Spatial Feature Engineering with ptools</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Spatial Feature Engineering with
ptools</h1>
<h4 class="author">Andrew Wheeler</h4>
<h4 class="date">2023-02-07</h4>



<p>This vignette goes over the different functions the
<code>ptools</code> package has to generate spatial features common to
criminological stype spatial covariate analysis. These include creating
spatial units of analysis (grid cells, hexagons). And calculating
different spatial feature engineering, such as the distance to nearest
and kernel density estimates for covariate values.</p>
<div id="creating-spatial-units-of-analysis" class="section level2">
<h2>Creating Spatial Units of Analysis</h2>
<p>I will start off with an example loading in the data that is included
in the package, and I load the <code>sp</code> library to use its simple
plotting functions.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ptools)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sp)     <span class="co">#for plotting functions</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_shoot,<span class="at">pch=</span><span class="st">&#39;.&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>We can create a set of vector grid cells over the study area. The
projection is in feet, so here I make half-square mile grid cells over
the NYC borough outline.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>hm_grid <span class="ot">&lt;-</span> <span class="fu">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hm_grid,<span class="at">col=</span><span class="st">&#39;grey&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAACVBMVEUAAAC+vr7////xRzILAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKSUlEQVR4nO3dwXaDRhKGUSfv/9Azo1lYFkICfpquku5dZKF26EZ8VOKT5OTnXwj8zD4AvQmIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICIiIgIgIiIiAiAiIiICICGisf27+vf/j6o9dfLRzCGgsAREREBEBEREQvCKgUe6Gzt8JtPzo/YSqS0CjCIiIgIgIiIiAiAgI3hPQKCYQEQERERARARERELwnoFEOT6D19YoENIqAiAiIiICICIiIgOA9AZ3u+ITZtV6EgE4nICICIiIgIgKCzQR0OhOIiICICIjIZQGVeHYlDvFZBEQXBZ5egSN8jlMnzPsJ9N+nN//xzT/BB7k8oAIEdCIBEZkS0OQnKKATzQho9gOcvf9HuT6g+X8XPf0A9CagE106gZ799WwCAZ1IQEQERERARAQEOwnoFKMnjAn04QREREBEBEREQEQEBIcI6BQmEBEBEREQEQERERAcIqBTXDOB7vby34V9FgERERARAREREBwioMypE2Z9/cmWRQgoI6DZB2hOQLMP0JyAZh+gOQHNPkBzApp9AHoTUOaiCVRq6PwhoIyAZh+gOQHNPkBzApp9gOYENPsA9CagowZMmG3rtQjoKAHdCOgoAd0I6CgB3QjoKAHdCOgoAd0IiIiAjjKBbgR0lIBuBHSUgG4EdJSAbgR0lIBuBEREQLuNmzBPrr/c+fL7fU1AuwnonoB2E9A9Ae0moHsC2k1A9wREREA7pBPmz0drV953/ekEtIOAlgS0g4CWBLSDgJYEtIOAlgS0g4CWBEREQDucOoHOWZ9OQDsIaElAOwhoSUA7CGhJQDsIaElARAS0ybQJc2D9WgLapFIgAmqoUiACaqhSIAJqqFIgAmqoUiAC4oMIaJNKE2bX+nAC2qRsIALqoWwgAuqhbCAC6qFsIAKiNwG9NnuCnLQ+joBeKxKAgLoqEoCAuioSgIC6KhKAgPhQAnqtyAQ5Z30EAb1WKgAB9VMqAAH1UyoAAfVTKgAB9VMqAAHxcQS0puAEMYE6KRiAgDopGEC6PuJhC2hNwQDS9RFPW0BrCgYgIOYS0IUKThATqJOCAQiok4IBCKiTggHEAQ143AJaUzAAAXVSMAABMZmArlNwgphAnRQMIA7Ib2EXKhiAgDopGEC67p/GX6lgAALi4whoTcEJkq6PIKA1BQMQUCcFAxBQJwUDEFAnBQMQEB9HQGsKTpDj6+MIaE2pAATUT6kABNRPqQAE1E+pAATUT6kABMSHEtCaUhPk8PpwAlpTIwABtVUjAAG1VSMAAbVVIwAB8dkEtFBqgphA/ZQKQED9lApAQP2UCkBA/ZQKQED9lApAQHw2Ad08eV1rTBATqAcBHSWgGwEdJaAbAR0loBsBHSUgIgK6uX9dS00QE6gHAR0loBsBHSWgGwEdJaAbAR0lICLfHtCT17XUBDGBihNQSEACighIQBEBCSgiIAFFvj0gQgJaKDVBTKB+SgUgoH5KBSCgfkoFIKB+SgUgID6bgBZKTRATqJ9SAQion1IBCKifUgEIqJ9SAQion1IBCIjPJqA1NSaICdRWjQAE1FaNAATUVo0ABNRWjQAExGcT0EKpCWIC9VMqAAH1UyoAAfVTKgAB9VMqAAHx2b4qoG0vZakJYgJVIqDzCej5T1UJQECVCOh8Anr+U1UCEFAlW77Tn1oBCIjP1iSgd2/YgTf09S7zJ8jdkYI/fzgBPd9FQBsJ6PkuAtpIQM93EdBGAnq+i4A2ahIQVVUPaPQbfr/NjAn0bv/j57uIgH63EdABAvrdRkAHCOh3GwEdIKDfbQR0gIB+txHQAdUDori6AY2eAGubXTuBNq7/38/vWV+Nq0sJ6HGzwgHdnVVAb41+QGubCWgXAT1uJqBdBPS4mYB2qRsQLdQNaPQbvrZZyQn0bn0eAT1uVjKQd+vzCOhxs5KBvFufR0CPm5UM5N36PAJ63KxkIO/W56kbEC3UDeiaN3i52bUTZMD+1xLQ42YC2kVAj5sJaBcBPW4moF0E9LiZgHYR0ONmAtqlbkC0UDegaybAP/dv7bjrr3603Pms619EQHff9rjrr3603FlAJ7nmAf75tsddf/Wj5c4COsk1D/DPtz3u+qsfLXcW0EmueYB/vu1x11/9aLmzgPgmdQO6ZgI8eV1HXH/b+qn7X0RAi297xPW3rZ+6/0UEtPi2R1x/2/qp+19EQItve8T1t62fuv9FBLT4tkdcf9v6qftfRECLb3vE9bet/89p/7OXi9QNiBbqBnTNBNh0iqsm4KnXv4iANpxCQOsEtOEUAlonoA2nENA6AW04hYDW1Q2IFuoGdOobvvrRplNcNYHWtgzOP5yANpxCQOsEtOEUAlonoA2nENA6AW04hYDW1Q2IFuoGdOobvvrSP5kAJ+1/8/Pz83ixZhPmHQENDejJxQR0EQEJKCIgAUUEJKCIgATE5ysY0EkTZnV9zzH2Xf/oJQ+drwgBvTyGgN4R0MtjCOgdAb08hoDeEdDLYwjonYIB0UnBgMZNoOfO/gqOnK8vAZ3+HQhosssDKnD+vgRU4vx9CajE+fsSUInz91UwIDopEtA5E2b2G77tfJ9FQGPuQkDXElBXAhpzFwK6loC6KhIQXc0O6KQJs/rR9Tczcf8ZBHT2zQjoUgJqTkBn34yALiWg5mYHRHPzAjpnwqyvz76lLyGgUbf0JQQ06pa+hIBG3dKXENCoW/oSAhp1S1/Cr/FEZgc0YAJxJQERERARAREREJHZAdHc7IDSCXR/mZn38bUERERARAREREBEBERkdkA01/df56AEAREREBEBEREQEb+FEWk1gahHQEQERERARARExG9hROpOIFoQEBEBEREQEQERERARv8YTKTiB6ERARAREREBEBETEb2FEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQERERARAREREBEBEREQEQEROQ/vbh2PWITYa0AAAAASUVORK5CYII=" style="display: block; margin: auto;" /></p>
<p>I have provided two arguments to the functions to limit the vector
areas returned. One is sometimes we only want areas that have at least
one observation for certain analyses (so at least one shooting over the
15+ year period in the current sample).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>lim_grid <span class="ot">&lt;-</span> <span class="fu">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>,<span class="at">point_over=</span>nyc_shoot)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lim_grid,<span class="at">col=</span><span class="st">&#39;grey&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>So you can see it is not as filled in for Staten Island. Note that
there is an additional argument, <code>point_n</code>, if you wanted to
limit grid cells even more, so at least 2, 3, etc. points are in a grid
cell.</p>
<p>A second way we can limit the grid cells are to not have dongle grid
cells – cells that only cover a small portion of the city. Here I only
include grid cells that have over 30% of their area inside of the border
of the city. Note though that this will cause <em>some</em> areas inside
the jurisdiction to not be covered. But you can pretty clearly see the
reduced number of areas compared to the original grid cells.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>lim_grid2 <span class="ot">&lt;-</span> <span class="fu">prep_grid</span>(nyc_bor,<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>,<span class="at">clip_level =</span> <span class="fl">0.3</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lim_grid2,<span class="at">col=</span><span class="st">&#39;grey&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># See how many fewer than original</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(hm_grid))   <span class="co">#original</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1493</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(lim_grid2)) <span class="co">#no dongles less than 30%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1290</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(lim_grid))  <span class="co">#only overlap 1 shooting</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 874</span></span></code></pre></div>
<p>I also have a similar function, <code>prep_hexgrid</code>, that
prepares spatial units of analysis in hexagons instead of square grid
cells. One difference is that instead of specifying the size of the cell
per length of a side, it specifies it per unit area. So it make it a
square mile, use <code>5280^2</code> as the area argument. (Here I make
it a half square mile.)</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>hex_grid <span class="ot">&lt;-</span> <span class="fu">prep_hexgrid</span>(nyc_bor,(<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span>,<span class="at">clip_level =</span> <span class="fl">0.3</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout all</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; geometries</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_grid,<span class="at">col=</span><span class="st">&#39;lightblue&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor,<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>The <code>prep_hexgrid</code> function also has the same
<code>point_over</code> and <code>point_n</code> arguments as does the
<code>prep_grid</code> function. Here I limit to areas with more than 4
shootings.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>hex_lim <span class="ot">&lt;-</span> <span class="fu">prep_hexgrid</span>(nyc_bor,(<span class="dv">5280</span><span class="sc">/</span><span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span>,<span class="at">point_over=</span>nyc_shoot,<span class="at">point_n=</span><span class="dv">4</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot shootings in NYC</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_lim,<span class="at">col=</span><span class="st">&#39;lightblue&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_bor,<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Note that the way I wrote these functions, the
<code>clip_level</code> for hexagons can be somewhat slow. Doing
<code>point_over</code> though should be reasonably fast.
<code>prep_grid</code> converts from raster to vector, so if you have
<em>very tiny</em> cells, you may consider just keeping the original
raster format for analysis. The conversion to vector will always creep
up your memory usage and computation time.</p>
<p>Finally, I have a function that if you have a set of origin points,
you can create voronoi polygons within an outline area. Sometimes if
working with line or address based features it is simpler to convert to
polygons and do subsequent geospatial operations. But note this can take
a bit of time as well for any really dense point set (same as really
tiny grid cells or hexagons).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a smaller sample of the liquor stores in NYC</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>liq_samp <span class="ot">&lt;-</span> nyc_liq[<span class="fu">sample</span>(<span class="fu">rownames</span>(nyc_liq<span class="sc">@</span>data),<span class="dv">20</span>),]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Buffer, it is hard to view all the little islands</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>nyc_buff <span class="ot">&lt;-</span> <span class="fu">buff_sp</span>(nyc_bor,<span class="dv">5000</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create Voronoi/Thiessen areas</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>liq_vor <span class="ot">&lt;-</span> <span class="fu">vor_sp</span>(nyc_buff,liq_samp)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in sp::proj4string(outline): CRS object has comment, which is lost in output; in tests, see</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot to show off</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(liq_vor,<span class="at">col=</span><span class="st">&#39;tan&#39;</span>,<span class="at">border=</span><span class="st">&#39;white&#39;</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(liq_samp,<span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nyc_buff,<span class="at">border=</span><span class="st">&#39;black&#39;</span>,<span class="at">lwd=</span><span class="dv">2</span>,<span class="at">add=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="spatial-feature-engineering" class="section level2">
<h2>Spatial Feature Engineering</h2>
<p>The spatial feature engineering functions are not only for creating
vector spatial units, but assigning typical values we may be interested
in. So lets reuse our <code>hex_grid</code> over the city, and calculate
the number of shootings in each hexgrid:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>shoot_cnt <span class="ot">&lt;-</span> <span class="fu">count_xy</span>(hex_grid,nyc_shoot)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(hex_grid,<span class="at">zcol=</span><span class="st">&#39;shoot_cnt&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Remember since <code>hex_grid</code> eliminated some dongles, we may
be interested to see if we happened to lose some shootings on the edges
of NYC.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sum</span>(hex_grid<span class="sc">$</span>shoot_cnt))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 27243</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">nrow</span>(nyc_shoot))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 27312</span></span></code></pre></div>
<p>So we ended up losing 37 shootings using this grid. We can also use
weights in these functions. So here, say I wanted to do a pre/post
analysis. A simple way to do that is to weight the observations in the
original point pattern, and then use that field as a weight.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>covid_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&#39;03/22/2020&#39;</span>, <span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>nyc_shoot<span class="sc">$</span>pre <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">*</span>(nyc_shoot<span class="sc">$</span>OCCUR_DATE <span class="sc">&lt;</span> covid_date)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>nyc_shoot<span class="sc">$</span>post <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">*</span>(nyc_shoot<span class="sc">$</span>OCCUR_DATE <span class="sc">&gt;=</span> covid_date)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>shoot_pre <span class="ot">&lt;-</span> <span class="fu">count_xy</span>(hex_grid,nyc_shoot,<span class="at">weight=</span><span class="st">&#39;pre&#39;</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>shoot_post <span class="ot">&lt;-</span> <span class="fu">count_xy</span>(hex_grid,nyc_shoot,<span class="at">weight=</span><span class="st">&#39;post&#39;</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_grid<span class="sc">$</span>shoot_pre,hex_grid<span class="sc">$</span>shoot_post)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAJACAMAAABSRCkEAAAAeFBMVEUAAAAAADoAAGYAOjoAOpAAZrY6AAA6ADo6AGY6Ojo6OpA6kNtmAABmADpmOpBmZmZmkJBmtttmtv+QOgCQOjqQOmaQkGaQtpCQ2/+2ZgC2tma2/7a2///bkDrb25Db2//b/7bb/9vb////tmb/25D//7b//9v///94pTjFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAZqUlEQVR4nO2di2LbOHZAkWzsbGtP2lrbXasTdbeWLf7/H1Z8gAT4EoELkAB5zmQcR6IuYOoYvBekCFUACFBbdwDyBoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIgILpGAnbCVQ2HCwFQgEIhAIRCAQiEAgEIFAICKSQLdTXeN9/x0kHCRLHIEu6qX+5qq/EYWDdIki0O3UanP58SEOBwkTRaCv1zf97XXiIIZAO4ERCETEyoGaIYgcKDAOJ5/WIVIV9vVaV2ET4w8CeaKK1HYd80A5oYyvibCyQO5XAYDBcQQ634uvz2elvr0HCQc1hxGo8ufnu1XQC8KB5iA50NfrvfY6P5XfHrWMj3WQTu7gH20isZkLOuhEYnojRSwiHcLuo8/lwCNQgrlKLOII9PX6/Xc1BF2nsuh971wEEmxYc62L9adA4TIDgQQbbhIuNciB/DfcJNw2zJREw6eSq5/CgED+OA0zex2TEMgbp0Rnt1kRAnmDQCUI5A0ClSCQP+RABQKJcCqsqMK2aRfSBoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEREEuh2qpd7mlivEIF2QxyBLuql/uaqvxGFg3SJIlCzXmrJMZe8PBBRBDIW+z7oorvHgREIRMTKgZohKMEcaKdrVmxFpCrs67WuwibGnw0FUls2vkOONg+kNm19h6wskGoJEs6jA8ZXCECkKqzMfK4pTiQiUGDiCVTVX0ZB7x8uKORAYYkmUKNOemU8VVhQogn0+VwJxETizjneCARBiSRQWWc9FTqdFoaDhIlVxt8d+vY+PRGNQHvhaBOJEBgEEhGqpItTGq5RcCKQhFCTSnEmp1aZ8kIgAaGmteNMj68z6Y5AAhAIgUQgEALJIAdCIBkudc7EttXDVGHR2t0NE+NB7lcHINBKTGQk2V+fhEArgUAbtbsXEGijdncDOdA27e6HuSosXxAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgVbE4bxpNqdYEWg9HK7cyOciDwRaDYdrxzK6zAyBVgOBNml3PyDQJu3uCHKgLdrdE5Ol1fAJQRW2bgGHQAkQdLxZefBCoO0JmvGsnT4h0PYgUMx2DwACxWz3CJADRWz3EMgKp96rqcLAiW3njBAodzaetXYX6OuP9+rvqWVUArcLD8hWoAsCJUFmAp27RSunlsEI2y48IrccSI9AK7WbM3Y9FK062vTqxUhJ9O1Uj1LJrZm6JvbQkM8Jdic8BCrXALvMLAl/56KPb5PrPe1wV/axk5OMLvFxwkOg84+Pz+en4vw0ue3t1Gpz4BULEWh8w3Ity6t6myvjjbWaD7xmKgKNb1jacb5rMVPGMwJVkAONb3h++nr98fH1On0Iu+dAzRB05BxotSpsU7ySaPXt/Xaa8UcvuzuTae9xXx4SzoWBiJUF6uaxg4SDzfER6PP5LsC3BfPRn89vU08h0E7wEKhOjNs8eQSdAc3MRSPQTnAXSNfoUwV6SVN8HWkE6o7KMY/P6R37/eaBSmavByoL/UMJ1M3yxJzvSXAuKc4IdOd8T5KOI1DfnTg/Xoqz2VFyoIqLekGgWK2kQ8Qq7PP5LwgUqZV0iDkPdDtNj1Jp7QU55EDBNtwk3PZQhS3fsJrmmU+hw7WbNnOLvqf3ZsfAJ4mu0p/LkqnoAO0mTXVImTiuJHi4iYFPGV8nNmfRGLSLXVv9EPU4M/h5Ukx4Y+AxkcgHCzUIJBmBHkwkhmo3ZRDIcyKxNOjhRGKgdpOGHMjrXNjDU+0h241GkCKJKuyw80AHGSCiIxLo9jfvUn7r9+4oKUp0EAhEIBCIOKpA5ECBOKxASdZOGRZuxxVonE0HphxHRQSy2DQ1yjIvQyALBHIFgSwQyBXOxtuQAzniL9BOb/M7XQitUCI9aCLFIs1VoOPe5nf74WH7HozgPwKt1G4qbJ+gbN+DMQ57Nt6V7d++7Xswho9Ai2/vEqLdVNj+7du+B2N4XZG46KPNgdpNhu0zkO17MIK7QAtvrhCq3XSQ10DSCHuowhbe3iVcuzsiyRFECiPQaqSZw0ghB1oNBNIcsgqTg0CbtLsjyIG2aHcDopVb/YeFDSVRlHEIGyAfKBZGEDaUxoBGEt1HnqosjCBsKJGUijK+DwI5wURiHwRyghFoADmQay8cN9x5DrTiSS+qsBXalbJ4LyfxduTH3ueBFo/zaRwQ8mPnAi3ONBNJSfPDQ6DbSXp7Mpd2ZSBQbDwEOovMcW03RDMIFA+feSDR53lc2w3QDjlQRPwnEldqV9xQ8CosbLmWe/HnM5E4u2K83uhBnpTvXgs7VGU/8HnkQDPLyGku+mOr16nPr2a708ImS/mnXo4CLbtJtD7bUUyf8Mh2nyGQTZR5ICNNmjrlmu0+QyCbKALteQQiB7LxEKis4y/zK861Z1rzyIHmKiHrubmVDZaH9NswUXwmEn98fD4/Fee5YkznSpOWpbTX5kYB67nlw0X2A8ti/OaBygV7dnNB2VweYj23PGHJP7VZjJ9A5dkMrzuUdTWc+2tjgUASfA5hT1+vPz6+Xh/OJ15nrhpKaOcikASvJPruxYP56LNSL5///jF93iOlnUsOJCBKGV8tyHuuF3eOV8aHOw42kUYDDqswl5DrsVVWEG8i8fNnKVC8icTgv+RZjxqbdd5ZoGq178vd95kTYvUVH7d/FhFHoOBpRtZ5y3addxXoUh6Yrvcvs6dU2wpt8uIhBApKNgJVtVedQJ9np6Lr8us6OU4hUFCyEci4z7jsVuPkQGHJJQeqDknXaniZHYHCtTsTInTdsSTg4tNmaxO8Jl26teOG5++/6yPY5GnSwO2mxeIpo3xx/DHcq7D6DOlF5k+me3rxpHW+uP4YcSYSVw+3Egg0sX3IDTcJtxIINLH94g2XXRMdst20IAca29xxwzp9vspuz7H6nu7VFr5Fy+x6dDOn1LbGoVNuhaa7QPo8fF43mOr9XoUfLdqISQ5EgTo1EsZdoCxvcdc7sofPV9qISaZCgTo1FsZnBKoL+M0nEt2bQ6DwYbxyoHIIumSVAyFQkY5AdSkmGn/IgVYmpRwoDLlWYQsayL0KcwuzZ4FGftrmkcEHBA/zOcDg7Fig4XirzP/NpxeP8EkenzbFeSb6pZ2MTryMH2Z8+pFmuq+/0YIuJZkhb8t+RyAEWgX/eaCV2hW2gECRcRcom3skkgOtgc9EYi63+c28Csuj4PMZgfJIonMnk8Fuv0l05uSSbiFQouxXIOOiREE2nf6e2Zj9CqSvSFRvkkUP0t8zW7PbHMi4IlFwUWIquybhUifhrhn4zwPdq3lBQZ/Ivsnk1zxh/GeiyxEod4FySTQSRpIDLVp2RdpuVBBIjE8ZX9Vh98FHsvJcGm8aAok5+DwQOZAUkUC3v3lfWL/C2fhFRcz4VotvZf3gQtk8CikRuxVIMrao+mT945f3Gum3eYTxba8CSbIbZfxxaaTf5iEyLAQafS0CLQWBRl+LQEvZq0DkQCuxK4E8lyUYDWRdvDi/4WibE2vTpXwLGC/2JFCMX/j5mKr5b/Hrmod3NDTtSKAYKcd8TNWYMHx+4nV6UJuNmhfuAlVLYKzXrmtIBFoXd4H0SnO3/07sonoE2gKPQ9i1Wofwkt6nMsiBNsAnB7qdhAtluLTrFNSntnnwosmndZk18fzE41RhJaVBwo+nJrP/fAeDHQ0iInwEOiv1X6f5W5TVg9TMhw9T2fe+6cie0hgRPkl0c0XiTA7UrqQxuSRLKrsegYR4CPSrHnpmqjDjBh4RF90NAgIJEU0kTmHcwCPeoruBIAeS4SPQ/SD24+M8U4VlNAL5F0T7KaRE+MwDfXu/azH7sdSLLtIC5UCB36z+OU9JU0f3yONUxn14KceV2Q+F6Q/QT5ZqTns98OHCCDeI7NrU4Y9kPlXYWyXQemtlBE5YjXCDyK5NkUv7j0Bea2V0q425vMjugBQECol3DnSZnYu+6Ju/TB3oEGgneFZhSs2utVKuxFKftQ8hEDlQwkSZB6rL+NtpJtX2LnVmjn4ud8pUzdYzVdjoda1eVduyy2PzJOpE4nn6Bh6+e3LmN375YKCKBVuror2yvtvWa8BRxcImc8RDoIcnSruJxPNTYIFmco7l6Uj9Rj54O1X3p++OY9/1i/aZL3kItOCmHFqbe7aEQAhkb7jozoi6RrudEAiB7A23XeqAHCgx3AWS3JfMo93BC5dWYYOVDHql3MOSqKvC1HgV5rw+AlVYxedzgCEo+p40f92r7/1//ydeucsBxRlHgYy7jKf3qYxhfOOrubyTf6jHDx8NjxFo3XZF8REoOgjkFOrxw0djrwKRA61E/gJNXRsyVoXpv6a3dGlij0WVM9kLpJQ+PC1qUw23fzySMNZMk7tAeqJmaZPD7R/nMmQ7MyAQAolAIAQSkbtA5EAbk5tAw3tX9kuk4T/bRx5UYcbfvZNlET4stpcSLjOBhjM6/dGh9+9mvFl6iFP2SyS9FG+SB3kJZKYxZhxlb2Hp1f5Z1COlt394wdDjSLJNMgGB+q9EICcQqP9KBHIiL4HIgZIjKYHmb2jZfdd+pGvsysLeB6fHPko9bMcq7iYCO0AVJtjQP9zkb+VwVGkONaMDxcNHJjbYzaCwKgkJNJkXDPOaok1thqnKMMzU6+0N/C8YOjQIVCCQBAQqEEhCQgKRA+VISgItqcKMf04WSw8feVCFgQNJCbTohdPnSotJER4K5NYodOQm0OBoVA9C5rMehzC3RsEgM4EG+XCdBinj8WEy/DCJdmsUTBDIuVEwQSDnRsEkM4HIgVIjeYFGz5VaJ1fHqzBlbnjIKmydTqcu0OhwsuACjXqCaOmVHHtkpWEzcYGG6Ycy/sy8Ts9UH9agtRI3BNopCGRshkDuIFC3HTmQD+RAzYbGidO2pJouvMyHh9eyevc2lSrMpSNUYebWzVn34cu6qR/rQ8tBf/+SmQdKpiMdWQg0k9A0Y5L+Ys1Jh+rzWunEQ5LpiAECLWk+YDAJyXTEAIGWNB8wmIRkOmKQhUDkQA3JdKQjD4GMKqy9itX+GOBYFdbfxq29mX9uRzIdaYkk0MM1xXz3g/4dNM+5q97/w40XTR2NvBAeEkegi2qWhLqqibWhPN+e+p1tj1Xdl2JkOSXjifbP4lYwaBlRBGpXLCyqBcKl4XovQ6CUiCKQsaTYNfyCcwiUEpmNQORAqRErB2qGINccSFnFk110dGe37HKsMP5Sw3Dd5Ym9Z+Z+gGBn0XZPpCpMrys2Mf5MhevsaQ9OyniFUvZIYg8Uo8NGf7Sa29ZpA6iJJJBfOHMyuRWlO071cxk7VRlNXOyAvdZnfiSyoKWsLJDqjkOjzxpfESgLGIFmuodAj0lKIHKg/Igi0IKleSfC6SJLmdcgWqWUVaF1j+tHdBDzg2O9Rwpj2+laiypsGXFGoNvp0ZLODw4f+sx6PRDU/7XP2d+ZTzfPqO7Tqqr3/0hTS34gmCLSIex2evINp9MWne6o1qKBO3qDwjTI+ry83mw8pyHTkRMrB7qqt9nnEWgnpJVEt88gUC6kJxA5UFakI9BU4aQMiu5kmXlibFhh9YJZ4ccbDVJ2HbB0S0ag4WBgjj5KGSONai6RNgr5MB2ShjnigJaKQMN0xExf9GCkEyRrKCpCGBQiHTpkSoVAU+1vEyM7EGiq/W1iZEcqApEDZUoyAo1UMMMzYYUx/JhVWJAeUYX5kJRAvYpcWRTmRay2T0XnlfXiYHIVh3RjEckIpGd0uqeskaboZpatQ5v5mHkEaX0K9L4f8ei0iFQEUoMbKFTfqPaPPkFRFIY5ZqJtXTdmjE5BDDpkfrwIBHLoLgINQSCH7iLQkFQEIgfKlFQEGhZcoxTWBvbr2kqpV+KHqZ+mohy9OktEoGYE6SYGjZlCa3TqzSsW9mBUmA+YocN2vt/xaNEzIA2B9MBhW9RkPZY77bBTNLmP6hvUu8IsbvZCboRAAX4MBAq5oU84BMqWNAQiB8qWRASaLLv6Vdj0hkVRmBu0Yd3rJKcXUIWF3tArnGrfa+1J87DtiPakMMam3lhjDQle48PhBxUn0hDISHaUMR2tCmUqVGhp2q+qKDqDmkTKiO6VoZDWOIFA4z1DoIUg0HjPEGghaQhEDpQtiQjkVIUV/cfs+sssi6x/TD7kvAW0JCKQMe0zYY7qTq1bZ9rbQ9ZgQJpuGD/CkYZAdrJT9M3R59U7S+qBSAujtbJSorl2MSgYCAQiEAhEpCEQOVC2JCKQexVm11z6KfW4gFqwCSwnEYHGhh6jYjf+Kqy5HsaTrUlDoN6Uc1+advQpOoEK2yLYCAQCEQgEItIQiBwoWxIRaHEVZoxHS8suiEkiAlkjUP97c5bInOth+EmANAQayYH0DHR3ICvav0iA0gGBQAQCgYg0BCIHypZEBHKswroXhe0VOJOnQKZFPY3s5yA2iQg0eR2Hdfbd+l+HsA9ky67pgGCkIdDYqQzVfMCne6awvhbdpUBdOGX8gTVAIBCBQCAiDYHIgbIlkkC3U/3+T67+7VmF9fVqXjoI5NRZEBBHoIt6qb+56m8ehJu+ml4fsPRAo8wIiLI5UQS6nVptLj8+FoQbz4HaY1hjkJXucCIjDaII9PXaLhp/tQ9ivaNPFxyBMoURCETEyoGaIYgcaO9EqsK+Xut3fmL88ajC9FbWS5z6BDFIZB4IcgWBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoGIzQSCnbCRQCvEj9DjHDqZ6o+NQFFC5hARgRIOmUNEBEo4ZA4RESjhkDlERKCEQ+YQEYESDplDRARKOGQOEREo4ZA5RMxDINg5CAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEBFVoKtS395DBatvr/cULuznX6s7zbbR5GHriME6Wt3W/SVoH9uQwToZU6DrvWPXYAZ9/nwPGvbrtbpVcRtNHraJGKqjt9P9tZfyTQ7Wxy5ksL0ZUaD6rsDnp0Dh9K2pA4W91gs2tNHkYZuIwTr6+VzeE/fy/Xe4PrYhw+3NiAJ1vQ3C5Slk2Kt6qfZhG00cVkcM3dFv7+H62IYM18mYAlWj5DWUQOd/qw/fwcLWAuloIcLWrw7b0bPRtUA/+j1kuE5GFKg+soZKgr5ey5tTn1/Cha32WhstRNgqYtiOlrd0D9rHOmS4TmYjUBPz++/UBQra0avOocMJVIUM18l8DmF1zOe35A9hATtaLykRto/GKhUhOplPEl3H/PkeLGzgJLqwBQrR0WZ9tpB9vJirnIToZDZlfP2TXo2iVso1cBlvKRmio3ptm4B91CHDdTKficTqh7ynfcHCXkNPJOoqLFBHP5/1YBGsj13IYHsz6qmMS8hTGcX5Xni+BQzbHHDaaPKwTcRAHb3UtworI4TqoxEy1N7kZCqIQCAQgUAgAoFABAKBCAQCEQgEIhAIRCAQiEAgEIFAIAKBQAQCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAOfP362LoLyXEsgb5e3/w2v+qPk7+MPTvg6tRM1iDQIkqBzt///PW/z12A6WDezWQIAi2ivlfq/RB2/tEexRCo5GgC/edzfVeTS304Km/N9fVqHJfK49S3v397//rj7+r7n6/NpuUjtUDlJp/P1a1RumBX447y92/K5zvPPn/+47l6ugr5W7e8F44mUHmL5Ob/8m5L5Q26Lj+M1Li8Be5V3QUqb2NajSTGI/+qBKru7nVVb22wa2XTU9F+Y41Ad53emmfKhnTLe+FoAr1UAtSDzrW6Y/uffxi3V6pv/XYudXmpD0XtI9XA8lR0d0LUweq7xN0Pcu03PYHKR++WNiFfCtFNLVPjaAK9VV/qe7pVbpyVeX/A9rZ3ekvjRnj1CiUvekmMNlitWHnHU/1NT6A3I6TR8j44qED1rd5UfSwyNrgMBLqYAt2T6Ps/qyVv3noCmd/YAv18N0IaLe+DgwrU3hXwdvoP83DyYAT69aFXuTl3mzwagWyBgt53PQGOKVD3Dl9+/N/JvHNyfdtkQ6D2kVKBXx9aAB3k/mVRDnQuc6C3HVb4xxSoqoX0KGJltF3Npd/tus5qqrB/3WssfcPdbpAaVmGWk22h1qhY5+Q74aACVbMx5aI198r6djLT6PP98f/5/tsYLpp5oDr1adb4K++M223SmwcqgxjzQM/NdFEz+DQt74VjCbSQqSrb62TqjiquMRDIonq37anpICH3CwIVzbmJ+hbu10A1dhfyHwgEMAkCgQgEAhEIBCIQCEQgEIhAIBCBQCACgUAEAoEIBAIRCAQiEAhEIBCIQCAQgUAgAoFABAKBCAQCEQgEIhAIRPw/vtUI13IFqqgAAAAASUVORK5CYII=" style="display: block; margin: auto;" /></p>
<p>So you can see that the pre and post shooting counts are highly
correlated and a few maybe outliers.</p>
<p>Sometimes we want other feature engineering RTM or Egohood style,
with density of nearby features. So we can calculate the density
(assuming a Gaussian kernel), for liquor stores <em>at the centroid</em>
of our polygon features. Since the area of our hexgrid is half a square
mile, <code>(5280/2)^2</code>, this means that the vertex to vertex
diameter of our hexagon cells is <code>hex_dim((5280/2)^2)</code>, not
quite 3300 feet (see also the <code>hex_area</code> and
<code>hex_wd</code> functions to convert between different hexagon
sizes). So there is not much point of doing a KDE bandwidth for under
this (will basically be the same as just counting up the total inside of
the hexagon. So here I do a bandwidth of 1 mile.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>kliq_1mile <span class="ot">&lt;-</span> <span class="fu">kern_xy</span>(hex_grid,nyc_liq,<span class="dv">5280</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(hex_grid,<span class="at">zcol=</span><span class="st">&#39;kliq_1mile&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>I also have similar functions to kernel density for bisquare weights,
<code>bisq_xy</code>, and for inverse distance weighting,
<code>idw_xy</code>. And for these you can pass in weights the same as
for the counts I showed above. I don’t have any demographic data here,
but for egohoods you may have census data at centroids, such as the
total number households in poverty, and use that as a weight (or a mean
estimate).</p>
<p>One function that is slightly different than others is the distance
between two point sets. So here is the distance to the nearest NYC
outdoor cafe (note that this data source has no outdoor cafes in Staten
Island):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>dist_cafe <span class="ot">&lt;-</span> <span class="fu">dist_xy</span>(hex_grid,nyc_cafe)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spplot</span>(hex_grid,<span class="at">zcol=</span><span class="st">&#39;dist_cafe&#39;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Unlike the other functions, you can pass in two point sets here,
under the hood it just grabs the X/Y coordinates for each set. So here
is the closest shooting to a cafe.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dist_shoot <span class="ot">&lt;-</span> <span class="fu">dist_xy</span>(nyc_cafe,nyc_shoot,<span class="at">fxy=</span><span class="fu">c</span>(<span class="st">&#39;X_COORD_CD&#39;</span>,<span class="st">&#39;Y_COORD_CD&#39;</span>))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dist_shoot)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   33.23  267.98  494.16  596.37  835.83 5765.32</span></span></code></pre></div>
<p>Not shown, but if the base polygons/features do not have X/Y
coordinates. You can do something like
<code>coords &lt;- coordinates(base); base$x &lt;- coords[,1]</code> and
ditto the second column for y (assuming <code>base</code> is a sp class
object). This function does not have a weight function, as that does not
make sense.</p>
<p>The final feature engineering point to note is the
<code>dcount_xy</code> function. Unlike the other functions that operate
on the centroids of the polygons (or whatever X/Y coordinates you pass
in), this counts the number of points within a specified distance to the
polygon border. This buffers the feature dataset and then calculates the
overlap, so with very large features can take a bit (whereas kernel
density calc timing is mostly a function of how many base polygons you
have):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>hex_grid<span class="sc">$</span>dcnt_cafe1mile <span class="ot">&lt;-</span> <span class="fu">dcount_xy</span>(hex_grid,nyc_cafe,<span class="dv">5280</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hex_grid<span class="sc">$</span>dist_cafe,hex_grid<span class="sc">$</span>dcnt_cafe1mile,<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10000</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v=</span><span class="dv">5280</span>) <span class="co"># not perfect, because of difference between polygon distance vs centroid distance</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Again you can use a weight function in the <code>dcount_xy</code>
function. So if you wanted to say count the number of children attending
school in 1 kilometer of your base polygons, this would be the function
you use.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
